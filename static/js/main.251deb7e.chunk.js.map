{"version":3,"sources":["views/Home.js","views/ColorTilesGame.js","lib/map.js","views/QuestMap.js","lib/monsters.js","views/MonsterView.js","App.js","index.js","img/tiles/blue.png","img/tiles/red.png","img/tiles/yellow.png","img/tiles/green.png","img/monsters/se_ifmo_ru.png"],"names":["Home","_ref","id","go","user","react_default","a","createElement","vkui","activePanel","title","before","photo_200","src","description","city","concat","first_name","last_name","style","textAlign","size","level","onClick","data-to","stretched","ColorTilesGame","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","tileSelected","color","state","initTask","answers","setState","currentPosition","expectedPosition","nextTile","directions","x","y","direction","Math","floor","random","stringDirection","offset","initTaskTileSelected","field","theme","left","PanelHeaderBack_default","className","backgroundImage","blueTile","redTile","yellowTile","greenTile","React","Component","nodeLocations","QuestMap","renderMapNode","nodeStates","key","cx","cy","r","data-monster-id","renderSvgMap","1","2","3","4","5","6","xmlns","width","height","viewBox","map","monsters","name","sprite","seIfmoRu","correctQr","hints","MonsterView","applyQrCode","send","VKWebAppOpenQRResult","matchesExpected","qr_data","view","completed","VKWebAppOpenQRFailed","_","monster","monsterId","renderIntroPanel","renderActionPanel","renderResultPanel","_this2","_ref2","alt","_this3","_ref3","PanelHeaderClose_default","children","_this4","_ref4","Fragment","failed","App","e","_e$currentTarget$data","currentTarget","dataset","to","objectWithoutProperties","perViewProps","objectSpread","defineProperty","sendConnectRequest","method","args","callbacks","connectCallbacks","connect","tryInvokeEventCallback","type","data","callback","undefined","activeView","views_Home","ColorTilesGame_ColorTilesGame","QuestMap_QuestMap","MonsterView_MonsterView","assign","subscribe","detail","handler","console","log","ReactDOM","render","App_App","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.251deb7e.chunk.js","sourcesContent":["import React from 'react';\nimport { View, Panel, ListItem, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\n\nconst Home = ({ id, go, user }) => (\n  <View id={id} activePanel=\"main\">\n    <Panel id=\"main\">\n      <PanelHeader>Квест</PanelHeader>\n      {user &&\n        <Group title=\"Привет\">\n          <ListItem\n            before={user.photo_200 ? <Avatar src={user.photo_200} /> : null}\n            description={(user.city && user.city.title) || ''}>\n            {`${user.first_name} ${user.last_name}`}\n          </ListItem>\n        </Group>}\n\n      <Group title=\"Выбери свой цвет\">\n        <Div style={{ textAlign: \"center\" }}>\n          <Button size=\"l\" level=\"1\" onClick={go} data-to=\"color-tiles-game\">Поехали</Button>\n        </Div>\n      </Group>\n\n      <Group title=\"Карта квеста\">\n        <Div style={{ textAlign: \"center\" }}>\n          <Button size=\"l\" level=\"1\" stretched={true} onClick={go} data-to=\"quest-map\">Посмотреть</Button>\n        </Div>\n      </Group>\n    </Panel>\n  </View>\n);\n\nexport default Home;\n","import React from 'react';\nimport { View, Panel, PanelHeader, Div } from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport '../css/ColorTilesGame.css';\nimport blueTile from '../img/tiles/blue.png';\nimport yellowTile from '../img/tiles/yellow.png';\nimport redTile from '../img/tiles/red.png';\nimport greenTile from '../img/tiles/green.png';\n\nexport default class ColorTilesGame extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      directions: 'Синяя или красная?',\n      answers: 0,\n      field: [\n        ['g', 'y', 'r', 'g', 'b', 'r'],\n        ['r', 'b', 'y', 'r', 'g', 'y'],\n        ['y', 'r', 'g', 'b', 'y', 'g'],\n        ['r', 'b', 'y', 'r', 'b', 'r'],\n        ['b', 'r', 'g', 'y', 'r', 'y'],\n        ['r', 'g', 'b', 'r', 'b', 'g']\n      ],\n      expectedPosition: [-1, -1],\n      initTask: true,\n      currentPosition: [-1, -1]\n    };\n  }\n\n  tileSelected = (color) => () => {\n    if (this.state.initTask) {\n      return;\n    }\n    if (this.state.answers === 3) {\n      this.setState({ directions: 'Поздравляем, ты прошел игру)' });\n      return;\n    }\n    this.setState({ currentPosition: this.state.expectedPosition });\n    this.nextTile(this.state.expectedPosition[0], this.state.expectedPosition[1]);\n\n    this.setState({ answers: this.state.answers + 1 });\n  }\n\n  nextTile = (x, y) => {\n    var direction = Math.floor(Math.random() * 4); // random int [0; 3]\n    // 0 - left, 1 - up, 2 - right, 3 - down\n    while (\n      (direction == 0 && y == 0) ||\n      (direction == 1 && x == 0) ||\n      (direction == 2 && y == 5) ||\n      (direction == 3 && x == 5)\n    )\n      direction = Math.floor(Math.random() * 4);\n    var stringDirection = '', offset = 0;\n    switch (direction) {\n      case 0:\n        stringDirection = 'left';\n        offset = 1 + Math.floor(Math.random() * y);\n        this.setState({ expectedPosition: [x, y - offset] });\n        break;\n      case 1:\n        stringDirection = 'up';\n        offset = 1 + Math.floor(Math.random() * x);\n        this.setState({ expectedPosition: [x - offset, y] });\n        break;\n      case 2:\n        stringDirection = 'right';\n        offset = 1 + Math.floor(Math.random() * (5 - y));\n        this.setState({ expectedPosition: [x, y + offset] });\n        break;\n      case 3:\n        stringDirection = 'down';\n        offset = 1 + Math.floor(Math.random() * (5 - x));\n        this.setState({ expectedPosition: [x + offset, y] });\n        break;\n    }\n    this.setState({ directions: `${stringDirection}, ${offset}` });\n  }\n\n  initTaskTileSelected = (color) => () => {\n    var x = 5, y;\n    if (color == 'b')\n      y = 2;\n    else\n      y = 3;\n    this.setState({ initTask: false, currentPosition: [x, y] });\n    this.nextTile(x, y);\n  }\n\n  render() {\n    return (\n      <View id={this.props.id} activePanel={this.state.initTask ? 'color-tiles-init-task' : 'color-tiles-main'}>\n        <Panel id=\"color-tiles-init-task\" theme=\"white\">\n          <PanelHeader left={<PanelHeaderBack onClick={this.props.go} data-to=\"home\" />}>\n            Какой цвет твой?\n          </PanelHeader>\n          <Div>\n            <div className=\"tile-directions\">{this.state.directions}</div>\n            <div className=\"tile-row\">\n              <button onClick={this.initTaskTileSelected('b')} className=\"tile-button\" style={{ backgroundImage: `url('${blueTile}')` }} />\n              <button onClick={this.initTaskTileSelected('r')} className=\"tile-button\" style={{ backgroundImage: `url('${redTile}')` }} />\n            </div>\n          </Div>\n        </Panel>\n        <Panel id=\"color-tiles-main\" theme=\"white\">\n          <PanelHeader left={<PanelHeaderBack onClick={this.props.go} data-to=\"home\" />}>\n            Какой цвет твой?\n          </PanelHeader>\n          <Div>\n            <div className=\"tile-directions\">{this.state.directions}</div>\n            <div className=\"tile-row\">\n              <button onClick={this.tileSelected('b')} className=\"tile-button\" style={{ backgroundImage: `url('${blueTile}')` }} />\n              <button onClick={this.tileSelected('r')} className=\"tile-button\" style={{ backgroundImage: `url('${redTile}')` }} />\n            </div>\n            <div className=\"tile-row\">\n              <button onClick={this.tileSelected('y')} className=\"tile-button\" style={{ backgroundImage: `url('${yellowTile}')` }} />\n              <button onClick={this.tileSelected('g')} className=\"tile-button\" style={{ backgroundImage: `url('${greenTile}')` }} />\n            </div>\n            <div className=\"tile-help\">\n              Встань лицом к каталогу Аббе\n            </div>\n          </Div>\n        </Panel>\n      </View>\n    );\n  }\n}\n","export const nodeLocations = [\n  { x: 34, y: 8, id: 6 },\n  { x: 12, y: 35, id: 5 },\n  { x: 52, y: 52, id: 4 },\n  { x: 7, y: 76, id: 3 },\n  { x: 56, y: 94, id: 2 },\n  { x: 30, y: 128, id: 1 }\n];\n\nexport const initialSavestate = {};\n\nexport function updateSavestateOnCompletion(oldSavestate, monsterId) {\n  return { [monsterId]: true, ...oldSavestate }; // ???\n}\n\nexport function computeNodeStates(savestate) {\n  return { 1: 'completed', 2: 'available', 3: 'locked', 4: 'locked', 5: 'locked', 6: 'locked' }\n}\n","import React from 'react';\nimport { View, Panel, PanelHeader, Div } from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport '../css/QuestMap.css';\nimport { nodeLocations, computeNodeStates } from '../lib/map';\n\nexport default class QuestMap extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <View id={this.props.id} activePanel=\"quest-map-main\">\n        <Panel id=\"quest-map-main\" theme=\"white\">\n          <PanelHeader left={<PanelHeaderBack onClick={this.props.go} data-to=\"home\" />}>\n            Карта\n          </PanelHeader>\n          <Div style={{ textAlign: \"center\" }}>{this.renderSvgMap()}</Div>\n        </Panel>\n      </View>\n    );\n  }\n\n  renderSvgMap() {\n    const nodeStates = computeNodeStates(null /* savestate */);\n    return (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"240\" height=\"510\" viewBox=\"0 0 63.5 134.9\">\n        {nodeLocations.map(this.renderMapNode(nodeStates))}\n      </svg>\n    );\n  }\n\n  renderMapNode = (nodeStates) => ({ x, y, id }) => {\n    switch (nodeStates[id]) {\n      case 'completed':\n        return <circle key={id} cx={x} cy={y} r=\"6\" className=\"map-node--completed\" />;\n      case 'locked':\n        return <circle key={id} cx={x} cy={y} r=\"6\" className=\"map-node--locked\" />\n      case 'available':\n        return <circle key={id} cx={x} cy={y} r=\"6\" className=\"map-node--available\"\n          onClick={this.props.go} data-to=\"monster-view\" data-monster-id={id} />;\n    }\n  }\n}\n","import React from 'react';\nimport seIfmoRu from '../img/monsters/se_ifmo_ru.png';\n\nconst monsters = {\n  2: {\n    name: 'Утиная типизация',\n    sprite: seIfmoRu,\n    description: 'И сколько в твоем интерпретаторе сегфолтов?',\n    correctQr: 'test',\n    hints: (\n      <p>\n        Добрый день, я Утинатор, и сегодня я хочу рассказать вам о том,\n        почему вы должны бросить все дела и заставить себя учить Форт.\n      </p>\n    )\n  }\n};\n\nexport default monsters;\n","import React from 'react';\nimport { View, Panel, PanelHeader, Div, Button } from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport PanelHeaderClose from '@vkontakte/vkui/dist/components/PanelHeaderClose/PanelHeaderClose';\nimport monsters from '../lib/monsters';\n\nexport default class MonsterView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { view: 'monster-view-intro' }\n  }\n\n  render() {\n    const monster = monsters[this.props.monsterId];\n    return (\n      <View id={this.props.id} activePanel={this.state.view}>\n        {this.renderIntroPanel(monster)}\n        {this.renderActionPanel(monster)}\n        {this.renderResultPanel(monster)}\n      </View>\n    );\n  }\n\n  renderIntroPanel({ name, sprite, description }) {\n    return (\n      <Panel id=\"monster-view-intro\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderBack onClick={this.props.go} data-to=\"quest-map\" />}>\n          {name}\n        </PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          <img alt={name} src={sprite} />\n          <p>{description}</p>\n          <div>\n            <Button size=\"l\" level=\"1\" onClick={() => this.setState({ view: 'monster-view-action' })}>В бой</Button>\n            <Button size=\"l\" level=\"2\">Подсказка</Button>\n          </div>\n        </Div>\n      </Panel>\n    );\n  }\n\n  renderActionPanel({ name, correctQr }) {\n    return (\n      <Panel id=\"monster-view-action\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderClose children=\"Закрыть\" onClick={() => this.setState({ view: 'monster-view-intro' })} />}>\n          {name}\n        </PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          <div>\n            <Button size=\"l\" level=\"1\" onClick={this.applyQrCode(correctQr)}>Применить</Button>\n          </div>\n        </Div>\n      </Panel>\n    );\n  }\n\n  applyQrCode = (correctQr) => () => {\n    this.props.send('VKWebAppOpenQR', {}, {\n      VKWebAppOpenQRResult: ({ qr_data }) => {\n        const matchesExpected = qr_data == correctQr;\n        this.setState({ view: 'monster-view-result', completed: matchesExpected });\n      },\n      VKWebAppOpenQRFailed: (_) => {\n        this.setState({ view: 'monster-view-result', completed: false });\n      }\n    });\n  }\n\n  renderResultPanel({ name }) {\n    const completed = <>\n      <p>Поздравляем, ты победил!</p>\n      <Button size=\"l\" level=\"1\" onClick={this.props.go} data-to=\"quest-map\">Далее</Button>\n    </>;\n    const failed = <>\n      <p>Очень жаль, но код неправильный :/</p>\n      <Button size=\"l\" level=\"1\" onClick={() => this.setState({ view: 'monster-view-action' })}>Вернуться</Button>\n    </>;\n    return (\n      <Panel id=\"monster-view-result\" theme=\"white\">\n        <PanelHeader>{name}</PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          {this.state.completed ? completed : failed}\n        </Div>\n      </Panel>\n    );\n  }\n}\n","import React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport { Root } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './views/Home';\nimport ColorTilesGame from './views/ColorTilesGame';\nimport QuestMap from './views/QuestMap';\nimport MonsterView from './views/MonsterView';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      view: 'home',\n      perViewProps: {},\n      user: null,\n      connectCallbacks: {}\n    };\n  }\n\n  render() {\n    return (\n      <Root activeView={this.state.view}>\n        <Home id=\"home\" user={this.state.user} go={this.go} />\n        <ColorTilesGame id=\"color-tiles-game\" go={this.go} />\n        <QuestMap id=\"quest-map\" go={this.go} />\n        <MonsterView id=\"monster-view\" go={this.go} send={this.sendConnectRequest}\n          {...this.state.perViewProps['monster-view']} />\n      </Root>\n    );\n  }\n\n  go = (e) => {\n    const { to, ...props } = e.currentTarget.dataset;\n    this.setState({ view: to, perViewProps: { [to]: props, ...this.state.perViewProps } });\n  };\n\n  /* callbacks is an object of { event type (string): callback function } */\n  sendConnectRequest = (method, args, callbacks) => {\n    this.setState({ connectCallbacks: callbacks });\n    connect.send(method, args);\n  }\n\n  tryInvokeEventCallback = (type, data) => {\n    const callback = this.state.connectCallbacks[type];\n    if (!callback) return false;\n\n    callback(data);\n    this.setState({ connectCallbacks: { ...this.state.connectCallbacks, [type]: undefined } });\n    return true;\n  }\n\n  componentDidMount() {\n    connect.subscribe((e) => {\n      switch (e.detail.type) {\n        case 'VKWebAppGetUserInfoResult':\n          this.setState({ user: e.detail.data });\n          break;\n        default:\n          if (!this.tryInvokeEventCallback(e.detail.type, e.detail.data)) {\n            if (e.detail.handler === 'VKWebAppOpenQR' &&\n              this.tryInvokeEventCallback('VKWebAppOpenQRResult', { qr_data: 'test' })) {\n              /* FIXME: remove later, this is a development hack to mock the API method */\n            }\n            else {\n              console.log(`Unhandled connect event: ${e.detail.type}`);\n            }\n          }\n      }\n    });\n    connect.send('VKWebAppGetUserInfo', {});\n  }\n}\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/blue.34464695.png\";","module.exports = __webpack_public_path__ + \"static/media/red.c083d19b.png\";","module.exports = __webpack_public_path__ + \"static/media/yellow.fc931dc4.png\";","module.exports = __webpack_public_path__ + \"static/media/green.1799831c.png\";","module.exports = __webpack_public_path__ + \"static/media/se_ifmo_ru.ea83b28a.png\";"],"sourceRoot":""}