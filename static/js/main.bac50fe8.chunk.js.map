{"version":3,"sources":["lib/vk.js","lib/savestate.js","views/Home.js","views/ColorTilesGame.js","views/QuestMap.js","lib/monsters.js","views/Monster.js","App.js","index.js","img/monsters/se_ifmo_ru.png","img/tiles/blue.png","img/tiles/red.png","img/tiles/yellow.png","img/tiles/green.png"],"names":["devMode","process","Vk","user","accessToken","_this","this","Object","classCallCheck","storage","set","key","value","Promise","resolve","localStorage","setItem","send","method","params","user_id","id","access_token","v","VKWebAppCallAPIMethodResult","get","getItem","args","callbacks","tryInvokeEventCallback","qr_data","connect","handleResponse","_ref2","_ref2$detail","detail","type","data","console","log","concat","callback","subscribe","nodeLocations","x","y","pathGraph","1","2","3","4","5","6","initialSavestate","updateSavestateOnCompletion","oldSavestate","monsterId","newSavestate","objectSpread","defineProperty","forEach","item","i","child","Home","_ref","go","react_default","a","createElement","vkui","activePanel","title","before","photo_200","src","description","city","first_name","last_name","style","textAlign","size","level","onClick","data-to","stretched","ColorTilesGame","props","possibleConstructorReturn","getPrototypeOf","call","tileSelected","color","state","field","expectedPosition","initTask","answers","setState","currentPosition","nextTile","directions","direction","Math","floor","random","offset","relRoutes","routes","slice","reverse","initTaskTileSelected","theme","left","PanelHeaderBack_default","className","backgroundImage","blueTile","redTile","yellowTile","greenTile","React","Component","QuestMap","savestate","renderSvgMap","xmlns","width","height","viewBox","map","renderMapNode","nodeStates","cx","cy","r","data-monster-id","monsters","name","sprite","seIfmoRu","spriteDefeated","correctQr","hint","Monster","setView","view","applyQrCode","VKWebAppOpenQRResult","_VKWebAppOpenQRResult","asyncToGenerator","regenerator_default","mark","_callee","matchesExpected","wrap","_context","prev","next","updateSavestate","completed","stop","_x","apply","arguments","VKWebAppOpenQRFailed","_","monster","renderIntroPanel","renderHintPanel","renderActionPanel","renderResultPanel","alt","_ref3","PanelHeaderClose_default","children","_ref4","_ref5","Fragment","failed","App","e","_e$currentTarget$data","currentTarget","dataset","to","objectWithoutProperties","perViewProps","vk","JSON","stringify","activeView","views_Home","ColorTilesGame_ColorTilesGame","QuestMap_QuestMap","Monster_Monster","assign","_this2","integrationCallback","initCallback","_ref$detail","app_id","unsubscribe","setupVkIntegration","_callee2","storedState","_context2","sent","parse","_x2","ReactDOM","render","App_App","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.bac50fe8.chunk.js","sourcesContent":["import connect from '@vkontakte/vkui-connect';\n\nconst devMode = process.env.NODE_ENV === 'development';\n\nexport function setupVkIntegration(integrationCallback) {\n  if (devMode) {\n    integrationCallback(new Vk(null, 'dev-access-token'));\n    return;\n  }\n\n  let user = null, accessToken = null;\n\n  function initCallback({ detail: { data, type } }) {\n    switch (type) {\n      case 'VKWebAppGetUserInfoResult':\n        user = data;\n        connect.send(\"VKWebAppGetAuthToken\", { app_id: 7017221 });\n        break;\n      case 'VKWebAppAccessTokenFailed':\n        connect.send(\"VKWebAppGetAuthToken\", { app_id: 7017221 });\n        break;\n      case 'VKWebAppAccessTokenReceived':\n        accessToken = data.access_token;\n        connect.unsubscribe(initCallback);\n        integrationCallback(new Vk(user, accessToken));\n        break;\n    }\n  }\n\n  connect.subscribe(initCallback);\n  connect.send('VKWebAppGetUserInfo', {});\n}\n\nexport class Vk {\n  constructor(user, accessToken) {\n    this.user = user;\n    this.accessToken = accessToken;\n    this.callbacks = {};\n    connect.subscribe(this.handleResponse);\n  }\n\n  storage = {\n    set: (key, value) => new Promise((resolve) => {\n      if (devMode)\n        resolve(localStorage.setItem(key, value));\n      else\n        this.send('VKWebAppCallAPIMethod', {\n          method: 'storage.set', params: {\n            key, value, user_id: this.user.id, access_token: this.accessToken, v: '5.95'\n          }\n        }, {\n          VKWebAppCallAPIMethodResult: resolve\n        });\n    }),\n    get: (key) => new Promise((resolve) => {\n      if (devMode)\n        resolve(localStorage.getItem(key))\n      else\n        this.send('VKWebAppCallAPIMethod', {\n          method: 'storage.get', params: {\n            key, user_id: this.user.id, access_token: this.accessToken, v: '5.95'\n          }\n        }, {\n          VKWebAppCallAPIMethodResult: resolve\n        });\n    })\n  }\n\n  /* callbacks is an object of { event type (string): callback function } */\n  send = (method, args, callbacks) => {\n    this.callbacks = callbacks;\n    if (!devMode) {\n      connect.send(method, args);\n    }\n    else {\n      /* In development mode, we need to mock API responses */\n      if (method === 'VKWebAppOpenQR') {\n        this.tryInvokeEventCallback('VKWebAppOpenQRResult', { qr_data: 'test' });\n      }\n    }\n  }\n\n  handleResponse = ({ detail: { type, data } }) => {\n    this.tryInvokeEventCallback(type, data) || console.log(`Unhandled connect event: ${type}`);\n  }\n\n  tryInvokeEventCallback = (type, data) => {\n    const callback = this.callbacks[type];\n    if (!callback) return false;\n\n    callback(data);\n    delete this.callbacks[type];\n    return true;\n  }\n}\n","export const nodeLocations = [\n  { x: 34, y: 8, id: 6 },\n  { x: 12, y: 35, id: 5 },\n  { x: 52, y: 52, id: 4 },\n  { x: 7, y: 76, id: 3 },\n  { x: 56, y: 94, id: 2 },\n  { x: 30, y: 128, id: 1 }\n];\n\nexport const pathGraph = { 1: [2], 2: [3, 4], 3: [5], 4: [5] , 5: [6], 6: [] };\n\nexport const initialSavestate = { 1: 'completed', 2: 'available', 3: 'locked', 4: 'locked', 5: 'locked', 6: 'locked' };\n\nexport function updateSavestateOnCompletion(oldSavestate, monsterId) {\n  const newSavestate = { ...oldSavestate, [monsterId]: 'completed' };\n  pathGraph[monsterId].forEach(function(item, i, child) {\n      newSavestate[child[i]] = 'available';\n  })\n  return newSavestate;\n}\n","import React from 'react';\nimport { View, Panel, ListItem, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\n\nconst Home = ({ id, go, user }) => (\n  <View id={id} activePanel=\"main\">\n    <Panel id=\"main\">\n      <PanelHeader>Квест</PanelHeader>\n      {user &&\n        <Group title=\"Привет\">\n          <ListItem\n            before={user.photo_200 ? <Avatar src={user.photo_200} /> : null}\n            description={(user.city && user.city.title) || ''}>\n            {`${user.first_name} ${user.last_name}`}\n          </ListItem>\n        </Group>}\n\n      <Group title=\"Выбери свой цвет\">\n        <Div style={{ textAlign: \"center\" }}>\n          <Button size=\"l\" level=\"1\" onClick={go} data-to=\"color-tiles-game\">Поехали</Button>\n        </Div>\n      </Group>\n\n      <Group title=\"Карта квеста\">\n        <Div style={{ textAlign: \"center\" }}>\n          <Button size=\"l\" level=\"1\" stretched={true} onClick={go} data-to=\"quest-map\">Посмотреть</Button>\n        </Div>\n      </Group>\n    </Panel>\n  </View>\n);\n\nexport default Home;\n","import React from 'react';\nimport { View, Panel, PanelHeader, Div } from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport '../css/ColorTilesGame.css';\nimport blueTile from '../img/tiles/blue.png';\nimport yellowTile from '../img/tiles/yellow.png';\nimport redTile from '../img/tiles/red.png';\nimport greenTile from '../img/tiles/green.png';\n\nexport default class ColorTilesGame extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      directions: 'Синяя или красная?',\n      answers: 0,\n      field: [\n        ['g', 'y', 'r', 'g', 'b', 'r'],\n        ['r', 'b', 'y', 'r', 'g', 'y'],\n        ['y', 'r', 'g', 'b', 'y', 'g'],\n        ['r', 'b', 'y', 'r', 'b', 'r'],\n        ['b', 'r', 'g', 'y', 'r', 'y'],\n        ['r', 'g', 'b', 'r', 'b', 'g']\n      ],\n      expectedPosition: [-1, -1],\n      initTask: true,\n      currentPosition: [-1, -1],\n      routes: ['left', 'up', 'right', 'down']\n    };\n  }\n\n  tileSelected = (color) => () => {\n    console.log(this.state.field[this.state.expectedPosition[0]]              \n      [this.state.expectedPosition[1]]);\n    if (this.state.initTask) {\n      return;\n    }\n    if (color != this.state.field[this.state.expectedPosition[0]]\n      [this.state.expectedPosition[1]]) {\n      this.setState({ initTask: true, answers: 0, directions: 'Неверно, попробуем ещё раз' });\n      return;\n    }\n    if (this.state.answers === 3) {\n      this.setState({ directions: 'Поздравляем, ты прошел игру)' });\n      return;\n    }\n    this.setState({ currentPosition: this.state.expectedPosition });\n    this.nextTile(this.state.expectedPosition[0], this.state.expectedPosition[1]);\n\n    this.setState({ answers: this.state.answers + 1 });\n  }\n\n  nextTile = (x, y) => {\n    var direction = Math.floor(Math.random() * 4); // random int [0; 3]\n    // 0 - left, 1 - up, 2 - right, 3 - down\n    while (\n      (direction == 0 && y == 0) ||\n      (direction == 1 && x == 0) ||\n      (direction == 2 && y == 5) ||\n      (direction == 3 && x == 5)\n    )\n      direction = Math.floor(Math.random() * 4);\n    var offset = 0, relRoutes = this.state.routes;\n    if (this.state.initTask)\n      relRoutes = ['left', 'up', 'right', 'down'];\n    switch (direction) {\n      case 0:\n        relRoutes = relRoutes.slice(1).concat(relRoutes.slice(0,1));\n        offset = 1 + Math.floor(Math.random() * y);\n        this.setState({ expectedPosition: [x, y - offset] });\n        break;\n      case 1:\n        offset = 1 + Math.floor(Math.random() * x);\n        this.setState({ expectedPosition: [x - offset, y] });\n        break;\n      case 2:\n        relRoutes = relRoutes.slice(1).reverse().concat(relRoutes.slice(0,1));\n        offset = 1 + Math.floor(Math.random() * (5 - y));\n        this.setState({ expectedPosition: [x, y + offset] });\n        break;\n      case 3:\n        relRoutes = relRoutes.slice(2).concat(relRoutes.slice(0,2));\n        offset = 1 + Math.floor(Math.random() * (5 - x));\n        this.setState({ expectedPosition: [x + offset, y] });\n        break;\n    }\n    this.setState({ directions: `${this.state.routes[direction]}, ${offset}`, routes: relRoutes });\n  }\n\n  initTaskTileSelected = (color) => () => {\n    var x = 5, y;\n    if (color == 'b')\n      y = 2;\n    else\n      y = 3;\n    this.setState({ initTask: false, currentPosition: [x, y] });\n    this.nextTile(x, y);\n  }\n\n  render() {\n    return (\n      <View id={this.props.id} activePanel={this.state.initTask ? 'color-tiles-init-task' : 'color-tiles-main'}>\n        <Panel id=\"color-tiles-init-task\" theme=\"white\">\n          <PanelHeader left={<PanelHeaderBack onClick={this.props.go} data-to=\"home\" />}>\n            Какой цвет твой?\n          </PanelHeader>\n          <Div>\n            <div className=\"tile-directions\">{this.state.directions}</div>\n            <div className=\"tile-row\">\n              <button onClick={this.initTaskTileSelected('b')} className=\"tile-button\" style={{ backgroundImage: `url('${blueTile}')` }} />\n              <button onClick={this.initTaskTileSelected('r')} className=\"tile-button\" style={{ backgroundImage: `url('${redTile}')` }} />\n            </div>\n          </Div>\n        </Panel>\n        <Panel id=\"color-tiles-main\" theme=\"white\">\n          <PanelHeader left={<PanelHeaderBack onClick={this.props.go} data-to=\"home\" />}>\n            Какой цвет твой?\n          </PanelHeader>\n          <Div>\n            <div className=\"tile-directions\">{this.state.directions}</div>\n            <div className=\"tile-row\">\n              <button onClick={this.tileSelected('b')} className=\"tile-button\" style={{ backgroundImage: `url('${blueTile}')` }} />\n              <button onClick={this.tileSelected('r')} className=\"tile-button\" style={{ backgroundImage: `url('${redTile}')` }} />\n            </div>\n            <div className=\"tile-row\">\n              <button onClick={this.tileSelected('y')} className=\"tile-button\" style={{ backgroundImage: `url('${yellowTile}')` }} />\n              <button onClick={this.tileSelected('g')} className=\"tile-button\" style={{ backgroundImage: `url('${greenTile}')` }} />\n            </div>\n            <div className=\"tile-help\">\n              Встань лицом к каталогу Аббе\n            </div>\n          </Div>\n        </Panel>\n      </View>\n    );\n  }\n}\n","import React from 'react';\nimport { View, Panel, PanelHeader, Div, Spinner } from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport '../css/QuestMap.css';\nimport { nodeLocations } from '../lib/savestate';\n\nexport default function QuestMap({ id, go, savestate }) {\n  return (\n    <View id={id} activePanel=\"quest-map-main\">\n      <Panel id=\"quest-map-main\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderBack onClick={go} data-to=\"home\" />}>\n          Карта\n        </PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          {savestate ? renderSvgMap(savestate, go) : <Spinner size=\"large\" />}\n        </Div>\n      </Panel>\n    </View>\n  );\n}\n\nconst renderSvgMap = (savestate, go) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"240\" height=\"510\" viewBox=\"0 0 63.5 134.9\">\n    {nodeLocations.map(renderMapNode(savestate, go))}\n  </svg>\n);\n\nconst renderMapNode = (nodeStates, go) => ({ x, y, id }) => {\n  switch (nodeStates[id]) {\n    case 'completed':\n      return <circle key={id} cx={x} cy={y} r=\"6\" className=\"map-node--completed\" />;\n    case 'locked':\n      return <circle key={id} cx={x} cy={y} r=\"6\" className=\"map-node--locked\" />\n    case 'available':\n      return <circle key={id} cx={x} cy={y} r=\"6\" className=\"map-node--available\"\n        onClick={go} data-to=\"monster\" data-monster-id={id} />;\n  }\n}\n","import React from 'react';\nimport seIfmoRu from '../img/monsters/se_ifmo_ru.png';\n\nconst monsters = {\n  3: {\n      name: 'Лекция Калинина',\n      sprite: seIfmoRu,\n      spriteDefeated: seIfmoRu,\n      description: 'Посчитайте вероятность того, что Калинин придет на лекцию?',\n      correctQr: 'test',\n      hint: (\n        <p>\n          Добрый день, я Игорь Владимирович, и сегодня мы будем заниматься теорвером.\n        </p>\n\t\t\t)\n\t\t},\n  2: {\n    name: 'Утиная типизация',\n    sprite: seIfmoRu,\n    spriteDefeated: seIfmoRu,\n    description: 'И сколько в твоем интерпретаторе сегфолтов?',\n    correctQr: 'test',\n    hint: (\n      <p>\n        Добрый день, я Утинатор, и сегодня я хочу рассказать вам о том,\n        почему вы должны бросить все дела и заставить себя учить Форт.\n      </p>\n    )\n  }\n};\n\nexport default monsters;\n","import React from 'react';\nimport { View, Panel, PanelHeader, Div, Button } from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport PanelHeaderClose from '@vkontakte/vkui/dist/components/PanelHeaderClose/PanelHeaderClose';\nimport '../css/Monster.css';\nimport monsters from '../lib/monsters';\nimport { updateSavestateOnCompletion } from '../lib/savestate';\n\nexport default class Monster extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { view: 'monster-intro' }\n  }\n\n  render() {\n    const monster = monsters[this.props.monsterId];\n    return (\n      <View id={this.props.id} activePanel={this.state.view}>\n        {this.renderIntroPanel(monster)}\n        {this.renderHintPanel(monster)}\n        {this.renderActionPanel(monster)}\n        {this.renderResultPanel(monster)}\n      </View>\n    );\n  }\n\n  setView = (view) => () => this.setState({ view });\n\n  renderIntroPanel({ name, sprite, description }) {\n    return (\n      <Panel id=\"monster-intro\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderBack onClick={this.props.go} data-to=\"quest-map\" />}>\n          {name}\n        </PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          <img className=\"monster-sprite\" alt={name} src={sprite} />\n          <p>{description}</p>\n          <div className=\"button-row\">\n            <Button size=\"l\" level=\"1\" onClick={this.setView('monster-action')}>В бой</Button>\n            <Button size=\"l\" level=\"2\" onClick={this.setView('monster-hint')}>Подсказка</Button>\n          </div>\n        </Div>\n      </Panel>\n    );\n  }\n\n  renderHintPanel({ name, hint }) {\n    return (\n      <Panel id=\"monster-hint\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderClose children=\"Закрыть\" onClick={this.setView('monster-intro')} />}>\n          {name}\n        </PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>{hint}</Div>\n      </Panel>\n    );\n  }\n\n  renderActionPanel({ name, correctQr }) {\n    return (\n      <Panel id=\"monster-action\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderClose children=\"Закрыть\" onClick={this.setView('monster-intro')} />}>\n          {name}\n        </PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          <div>\n            <Button size=\"l\" level=\"1\" onClick={this.applyQrCode(correctQr)}>Применить</Button>\n          </div>\n        </Div>\n      </Panel>\n    );\n  }\n\n  applyQrCode = (correctQr) => () => {\n    this.props.send('VKWebAppOpenQR', {}, {\n      VKWebAppOpenQRResult: async ({ qr_data }) => {\n        const matchesExpected = qr_data == correctQr;\n        if (matchesExpected) {\n          const savestate = updateSavestateOnCompletion(this.props.savestate, this.props.monsterId);\n          await this.props.updateSavestate(savestate);\n        }\n        this.setState({ view: 'monster-result', completed: matchesExpected });\n      },\n      VKWebAppOpenQRFailed: (_) => {\n        this.setState({ view: 'monster-result', completed: false });\n      }\n    });\n  }\n\n  renderResultPanel({ name, spriteDefeated }) {\n    const completed = <>\n      <img className=\"monster-sprite\" alt={name} src={spriteDefeated} />\n      <p>Поздравляем, ты победил!</p>\n      <Button size=\"l\" level=\"1\" onClick={this.props.go} data-to=\"quest-map\">Далее</Button>\n    </>;\n    const failed = <>\n      <p>Очень жаль, но код неправильный :/</p>\n      <Button size=\"l\" level=\"1\" onClick={this.setView('monster-action')}>Вернуться</Button>\n    </>;\n    return (\n      <Panel id=\"monster-result\" theme=\"white\">\n        <PanelHeader>{name}</PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          {this.state.completed ? completed : failed}\n        </Div>\n      </Panel>\n    );\n  }\n}\n","import React from 'react';\nimport { Root } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport { setupVkIntegration } from './lib/vk';\nimport { initialSavestate } from './lib/savestate';\n\nimport Home from './views/Home';\nimport ColorTilesGame from './views/ColorTilesGame';\nimport QuestMap from './views/QuestMap';\nimport Monster from './views/Monster';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { view: 'home', perViewProps: {}, vk: null, savestate: null };\n  }\n\n  render() {\n    return (\n      <Root activeView={this.state.view}>\n        <Home id=\"home\" user={this.state.vk && this.state.vk.user} go={this.go} />\n        <ColorTilesGame id=\"color-tiles-game\" go={this.go} />\n        <QuestMap id=\"quest-map\" go={this.go} savestate={this.state.savestate} />\n        <Monster id=\"monster\" go={this.go} send={this.state.vk && this.state.vk.send}\n          savestate={this.state.savestate} updateSavestate={this.updateSavestate}\n          {...this.state.perViewProps.monster} />\n      </Root>\n    );\n  }\n\n  go = (e) => {\n    const { to, ...props } = e.currentTarget.dataset;\n    this.setState({ view: to, perViewProps: { ...this.state.perViewProps, [to]: props } });\n  };\n\n  updateSavestate = async (newSavestate) => {\n    await this.state.vk.storage.set('savestate', JSON.stringify(newSavestate));\n    this.setState({ savestate: newSavestate });\n  }\n\n  componentDidMount() {\n    setupVkIntegration(async (vk) => {\n      const storedState = await vk.storage.get('savestate');\n      const savestate = (storedState && storedState != \"\") ? JSON.parse(storedState) : initialSavestate;\n      this.setState({ vk, savestate })\n    });\n  }\n}\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/se_ifmo_ru.ea83b28a.png\";","module.exports = __webpack_public_path__ + \"static/media/blue.34464695.png\";","module.exports = __webpack_public_path__ + \"static/media/red.c083d19b.png\";","module.exports = __webpack_public_path__ + \"static/media/yellow.fc931dc4.png\";","module.exports = __webpack_public_path__ + \"static/media/green.1799831c.png\";"],"sourceRoot":""}