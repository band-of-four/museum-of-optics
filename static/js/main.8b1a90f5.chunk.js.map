{"version":3,"sources":["lib/vk.js","lib/savestate.js","views/Home.js","lib/ColorTilesGame.js","views/ColorTilesGame.js","views/QuestMap.js","lib/monsters.js","views/Monster.js","App.js","index.js","img/monsters/se_ifmo_ru.png","img/tiles/blue.png","img/tiles/red.png","img/tiles/yellow.png","img/tiles/green.png"],"names":["devMode","process","Vk","user","accessToken","_this","this","Object","classCallCheck","storage","set","key","value","Promise","resolve","localStorage","setItem","send","method","params","user_id","id","access_token","v","VKWebAppCallAPIMethodResult","get","getItem","_ref2","response","args","callbacks","tryInvokeEventCallback","qr_data","connect","handleResponse","_ref3","_ref3$detail","detail","type","data","console","log","concat","callback","subscribe","nodeLocations","x","y","pathGraph","1","2","3","4","5","6","initialSavestate","updateSavestateOnCompletion","oldSavestate","monsterId","newSavestate","objectSpread","defineProperty","forEach","item","i","child","Home","_ref","go","react_default","a","createElement","vkui","activePanel","title","before","photo_200","src","description","city","first_name","last_name","style","textAlign","size","level","onClick","data-to","stretched","field","computeTurn","color","ans","routes","directions","answers","initTask","direction","Math","floor","random","offset","strDirection","slice","ColorTilesGame","props","possibleConstructorReturn","getPrototypeOf","call","tileSelected","newState","state","setState","initTaskTileSelected","computeInitTask","theme","left","PanelHeaderBack_default","className","backgroundImage","blueTile","redTile","yellowTile","greenTile","React","Component","QuestMap","savestate","xmlns","width","height","viewBox","map","renderMapNode","nodeStates","cx","cy","r","data-monster-id","monsters","name","sprite","seIfmoRu","spriteDefeated","correctQr","hint","Monster","setView","view","applyQrCode","VKWebAppOpenQRResult","_VKWebAppOpenQRResult","asyncToGenerator","regenerator_default","mark","_callee","matchesExpected","wrap","_context","prev","next","updateSavestate","completed","stop","_x","apply","arguments","VKWebAppOpenQRFailed","_","monster","renderIntroPanel","renderHintPanel","renderActionPanel","renderResultPanel","alt","PanelHeaderClose_default","children","_ref4","_ref5","Fragment","failed","App","e","_e$currentTarget$data","currentTarget","dataset","to","objectWithoutProperties","perViewProps","vk","JSON","stringify","_this2","integrationCallback","initCallback","_ref$detail","app_id","unsubscribe","setupVkIntegration","_callee2","storedState","_context2","sent","parse","_x2","activeView","views_Home","ColorTilesGame_ColorTilesGame","QuestMap_QuestMap","Monster_Monster","assign","ReactDOM","render","App_App","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.8b1a90f5.chunk.js","sourcesContent":["import connect from '@vkontakte/vkui-connect';\n\nconst devMode = process.env.NODE_ENV === 'development';\n\nexport function setupVkIntegration(integrationCallback) {\n  if (devMode) {\n    integrationCallback(new Vk(null, 'dev-access-token'));\n    return;\n  }\n\n  let user = null, accessToken = null;\n\n  function initCallback({ detail: { data, type } }) {\n    switch (type) {\n      case 'VKWebAppGetUserInfoResult':\n        user = data;\n        connect.send(\"VKWebAppGetAuthToken\", { app_id: 7017221 });\n        break;\n      case 'VKWebAppAccessTokenFailed':\n        connect.send(\"VKWebAppGetAuthToken\", { app_id: 7017221 });\n        break;\n      case 'VKWebAppAccessTokenReceived':\n        accessToken = data.access_token;\n        connect.unsubscribe(initCallback);\n        integrationCallback(new Vk(user, accessToken));\n        break;\n    }\n  }\n\n  connect.subscribe(initCallback);\n  connect.send('VKWebAppGetUserInfo', {});\n}\n\nexport class Vk {\n  constructor(user, accessToken) {\n    this.user = user;\n    this.accessToken = accessToken;\n    this.callbacks = {};\n    connect.subscribe(this.handleResponse);\n  }\n\n  storage = {\n    set: (key, value) => new Promise((resolve) => {\n      if (devMode)\n        resolve(localStorage.setItem(key, value));\n      else\n        this.send('VKWebAppCallAPIMethod', {\n          method: 'storage.set', params: {\n            key, value, user_id: this.user.id, access_token: this.accessToken, v: '5.95'\n          }\n        }, {\n          VKWebAppCallAPIMethodResult: resolve\n        });\n    }),\n    get: (key) => new Promise((resolve) => {\n      if (devMode)\n        resolve(localStorage.getItem(key))\n      else\n        this.send('VKWebAppCallAPIMethod', {\n          method: 'storage.get', params: {\n            key, user_id: this.user.id, access_token: this.accessToken, v: '5.95'\n          }\n        }, {\n          VKWebAppCallAPIMethodResult: ({ response }) => resolve(response)\n        });\n    })\n  }\n\n  /* callbacks is an object of { event type (string): callback function } */\n  send = (method, args, callbacks) => {\n    this.callbacks = callbacks;\n    if (!devMode) {\n      connect.send(method, args);\n    }\n    else {\n      /* In development mode, we need to mock API responses */\n      if (method === 'VKWebAppOpenQR') {\n        this.tryInvokeEventCallback('VKWebAppOpenQRResult', { qr_data: 'test' });\n      }\n    }\n  }\n\n  handleResponse = ({ detail: { type, data } }) => {\n    this.tryInvokeEventCallback(type, data) || console.log(`Unhandled connect event: ${type}`);\n  }\n\n  tryInvokeEventCallback = (type, data) => {\n    const callback = this.callbacks[type];\n    if (!callback) return false;\n\n    callback(data);\n    delete this.callbacks[type];\n    return true;\n  }\n}\n","export const nodeLocations = [\n  { x: 34, y: 8, id: 6 },\n  { x: 12, y: 35, id: 5 },\n  { x: 52, y: 52, id: 4 },\n  { x: 7, y: 76, id: 3 },\n  { x: 56, y: 94, id: 2 },\n  { x: 30, y: 128, id: 1 }\n];\n\nexport const pathGraph = { 1: [2], 2: [3, 4], 3: [5], 4: [5] , 5: [6], 6: [] };\n\nexport const initialSavestate = { 1: 'completed', 2: 'available', 3: 'locked', 4: 'locked', 5: 'locked', 6: 'locked' };\n\nexport function updateSavestateOnCompletion(oldSavestate, monsterId) {\n  const newSavestate = { ...oldSavestate, [monsterId]: 'completed' };\n  pathGraph[monsterId].forEach(function(item, i, child) {\n      newSavestate[child[i]] = 'available';\n  })\n  return newSavestate;\n}\n","import React from 'react';\nimport { View, Panel, ListItem, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\n\nconst Home = ({ id, go, user }) => (\n  <View id={id} activePanel=\"main\">\n    <Panel id=\"main\">\n      <PanelHeader>Квест</PanelHeader>\n      {user &&\n        <Group title=\"Привет\">\n          <ListItem\n            before={user.photo_200 ? <Avatar src={user.photo_200} /> : null}\n            description={(user.city && user.city.title) || ''}>\n            {`${user.first_name} ${user.last_name}`}\n          </ListItem>\n        </Group>}\n\n      <Group title=\"Выбери свой цвет\">\n        <Div style={{ textAlign: \"center\" }}>\n          <Button size=\"l\" level=\"1\" onClick={go} data-to=\"color-tiles-game\">Поехали</Button>\n        </Div>\n      </Group>\n\n      <Group title=\"Карта квеста\">\n        <Div style={{ textAlign: \"center\" }}>\n          <Button size=\"l\" level=\"1\" stretched={true} onClick={go} data-to=\"quest-map\">Посмотреть</Button>\n        </Div>\n      </Group>\n    </Panel>\n  </View>\n);\n\nexport default Home;\n","const field = [\n  ['g', 'y', 'r', 'g', 'b', 'r'],\n  ['r', 'b', 'y', 'r', 'g', 'y'],\n  ['y', 'r', 'g', 'b', 'y', 'g'],\n  ['r', 'b', 'y', 'r', 'b', 'r'],\n  ['b', 'r', 'g', 'y', 'r', 'y'],\n  ['r', 'g', 'b', 'r', 'b', 'g']\n];\n\nexport function computeTurn(color, x, y, ans, routes) {\n  if (color != field[x][y]) { // player mistake\n    return {\n      directions: 'Неверно, попробуем ещё раз. Синяя или красная?',\n      routes: ['left', 'up', 'right', 'down'], // idle routes\n      answers: 0,\n      initTask: true,\n      x: -1,\n      y: -1\n    };\n  }\n  // compute next tile\n  var direction = Math.floor(Math.random() * 4); // random int [0; 3]\n  while (\n    (direction == 0 && y == 0) ||\n    (direction == 1 && x == 0) ||\n    (direction == 2 && y == 5) ||\n    (direction == 3 && x == 5))\n    direction = Math.floor(Math.random() * 4);\n  var offset = 0, strDirection = routes[direction];\n  console.log(routes);\n  switch (direction) {\n    case 0:\n      offset = 1 + Math.floor(Math.random() * y);\n      y = y - offset;\n      break;\n    case 1:\n      offset = 1 + Math.floor(Math.random() * x);\n      x = x - offset;\n      break;\n    case 2:\n      offset = 1 + Math.floor(Math.random() * (5 - y));\n      y = y + offset;\n      break;\n    case 3:\n      offset = 1 + Math.floor(Math.random() * (5 - x));\n      x = x + offset;\n      break;\n  }\n  switch (routes[direction]) {\n    case 'left':\n      routes = routes.slice(1).concat(routes[0]);\n      break;\n    case 'up':\n      break;\n    case 'right':\n      routes = routes.slice(3).concat(routes.slice(0,3));\n      break;\n    case 'down':\n      routes = routes.slice(2).concat(routes.slice(0,2));\n      break;\n  }\n  console.log(direction, x, y);\n  return {\n    directions: `${strDirection}, ${offset}`,\n    routes: routes,\n    answers: ans + 1,\n    initTask: false,\n    x: x,\n    y: y\n  };\n}\n\nexport function computeInitTask(color) {\n  var x = 5, y;\n  if (color == 'b')\n    y = 2;\n  else\n    y = 3;\n  return computeTurn(color, x, y, -1, ['left', 'up', 'right', 'down']);\n}\n","import React from 'react';\nimport { View, Panel, PanelHeader, Div } from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport '../css/ColorTilesGame.css';\nimport blueTile from '../img/tiles/blue.png';\nimport yellowTile from '../img/tiles/yellow.png';\nimport redTile from '../img/tiles/red.png';\nimport greenTile from '../img/tiles/green.png';\nimport { computeTurn, computeInitTask } from '../lib/ColorTilesGame.js';\n\nexport default class ColorTilesGame extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      directions: 'Синяя или красная?',\n      answers: 0,\n      x: -1,\n      y: -1,\n      initTask: true,\n      routes: ['left', 'up', 'right', 'down']\n    };\n  }\n\n  tileSelected = (color) => () => {\n    var newState = computeTurn(color,\n      this.state.x,\n      this.state.y,\n      this.state.answers,\n      this.state.routes);\n    if (newState.answers == 3)\n      newState.directions = 'Поздравляем, ты прошел игру!';\n    this.setState(newState);\n  }\n  initTaskTileSelected = (color) => () => {\n    var newState = computeInitTask(color);\n    this.setState(newState);\n  }\n\n  render() {\n    return (\n      <View id={this.props.id} activePanel={this.state.initTask ? 'color-tiles-init-task' : 'color-tiles-main'}>\n        <Panel id=\"color-tiles-init-task\" theme=\"white\">\n          <PanelHeader left={<PanelHeaderBack onClick={this.props.go} data-to=\"home\" />}>\n            Какой цвет твой?\n          </PanelHeader>\n          <Div>\n            <div className=\"tile-directions\">{this.state.directions}</div>\n            <div className=\"tile-row\">\n              <button onClick={this.initTaskTileSelected('b')} className=\"tile-button\" style={{ backgroundImage: `url('${blueTile}')` }} />\n              <button onClick={this.initTaskTileSelected('r')} className=\"tile-button\" style={{ backgroundImage: `url('${redTile}')` }} />\n            </div>\n          </Div>\n        </Panel>\n        <Panel id=\"color-tiles-main\" theme=\"white\">\n          <PanelHeader left={<PanelHeaderBack onClick={this.props.go} data-to=\"home\" />}>\n            Какой цвет твой?\n          </PanelHeader>\n          <Div>\n            <div className=\"tile-directions\">{this.state.directions}</div>\n            <div className=\"tile-row\">\n              <button onClick={this.tileSelected('b')} className=\"tile-button\" style={{ backgroundImage: `url('${blueTile}')` }} />\n              <button onClick={this.tileSelected('r')} className=\"tile-button\" style={{ backgroundImage: `url('${redTile}')` }} />\n            </div>\n            <div className=\"tile-row\">\n              <button onClick={this.tileSelected('y')} className=\"tile-button\" style={{ backgroundImage: `url('${yellowTile}')` }} />\n              <button onClick={this.tileSelected('g')} className=\"tile-button\" style={{ backgroundImage: `url('${greenTile}')` }} />\n            </div>\n            <div className=\"tile-help\">\n              Встань лицом к каталогу Аббе\n            </div>\n          </Div>\n        </Panel>\n      </View>\n    );\n  }\n}\n","import React from 'react';\nimport { View, Panel, PanelHeader, Div } from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport '../css/QuestMap.css';\nimport { nodeLocations } from '../lib/savestate';\n\nexport default function QuestMap({ id, go, savestate }) {\n  return (\n    <View id={id} activePanel=\"quest-map-main\">\n      <Panel id=\"quest-map-main\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderBack onClick={go} data-to=\"home\" />}>\n          Карта\n        </PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"240\" height=\"510\" viewBox=\"0 0 63.5 134.9\">\n            {nodeLocations.map(renderMapNode(savestate, go))}\n          </svg>\n        </Div>\n      </Panel>\n    </View>\n  );\n}\n\nconst renderMapNode = (nodeStates, go) => ({ x, y, id }) => {\n  switch (nodeStates[id]) {\n    case 'completed':\n      return <circle key={id} cx={x} cy={y} r=\"6\" className=\"map-node--completed\" />;\n    case 'locked':\n      return <circle key={id} cx={x} cy={y} r=\"6\" className=\"map-node--locked\" />\n    case 'available':\n      return <circle key={id} cx={x} cy={y} r=\"6\" className=\"map-node--available\"\n        onClick={go} data-to=\"monster\" data-monster-id={id} />;\n  }\n}\n","import React from 'react';\nimport seIfmoRu from '../img/monsters/se_ifmo_ru.png';\n\nconst monsters = {\n  3: {\n      name: 'Лекция Калинина',\n      sprite: seIfmoRu,\n      spriteDefeated: seIfmoRu,\n      description: 'Посчитайте вероятность того, что Калинин придет на лекцию?',\n      correctQr: 'test',\n      hint: (\n        <p>\n          Добрый день, я Игорь Владимирович, и сегодня мы будем заниматься теорвером.\n        </p>\n\t\t\t)\n\t\t},\n  2: {\n    name: 'Утиная типизация',\n    sprite: seIfmoRu,\n    spriteDefeated: seIfmoRu,\n    description: 'И сколько в твоем интерпретаторе сегфолтов?',\n    correctQr: 'test',\n    hint: (\n      <p>\n        Добрый день, я Утинатор, и сегодня я хочу рассказать вам о том,\n        почему вы должны бросить все дела и заставить себя учить Форт.\n      </p>\n    )\n  }\n};\n\nexport default monsters;\n","import React from 'react';\nimport { View, Panel, PanelHeader, Div, Button } from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport PanelHeaderClose from '@vkontakte/vkui/dist/components/PanelHeaderClose/PanelHeaderClose';\nimport '../css/Monster.css';\nimport monsters from '../lib/monsters';\nimport { updateSavestateOnCompletion } from '../lib/savestate';\n\nexport default class Monster extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { view: 'monster-intro' }\n  }\n\n  render() {\n    const monster = monsters[this.props.monsterId];\n    return (\n      <View id={this.props.id} activePanel={this.state.view}>\n        {this.renderIntroPanel(monster)}\n        {this.renderHintPanel(monster)}\n        {this.renderActionPanel(monster)}\n        {this.renderResultPanel(monster)}\n      </View>\n    );\n  }\n\n  setView = (view) => () => this.setState({ view });\n\n  renderIntroPanel({ name, sprite, description }) {\n    return (\n      <Panel id=\"monster-intro\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderBack onClick={this.props.go} data-to=\"quest-map\" />}>\n          {name}\n        </PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          <img className=\"monster-sprite\" alt={name} src={sprite} />\n          <p>{description}</p>\n          <div className=\"button-row\">\n            <Button size=\"l\" level=\"1\" onClick={this.setView('monster-action')}>В бой</Button>\n            <Button size=\"l\" level=\"2\" onClick={this.setView('monster-hint')}>Подсказка</Button>\n          </div>\n        </Div>\n      </Panel>\n    );\n  }\n\n  renderHintPanel({ name, hint }) {\n    return (\n      <Panel id=\"monster-hint\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderClose children=\"Закрыть\" onClick={this.setView('monster-intro')} />}>\n          {name}\n        </PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>{hint}</Div>\n      </Panel>\n    );\n  }\n\n  renderActionPanel({ name, correctQr }) {\n    return (\n      <Panel id=\"monster-action\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderClose children=\"Закрыть\" onClick={this.setView('monster-intro')} />}>\n          {name}\n        </PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          <div>\n            <Button size=\"l\" level=\"1\" onClick={this.applyQrCode(correctQr)}>Применить</Button>\n          </div>\n        </Div>\n      </Panel>\n    );\n  }\n\n  applyQrCode = (correctQr) => () => {\n    this.props.send('VKWebAppOpenQR', {}, {\n      VKWebAppOpenQRResult: async ({ qr_data }) => {\n        const matchesExpected = qr_data == correctQr;\n        if (matchesExpected) {\n          const savestate = updateSavestateOnCompletion(this.props.savestate, this.props.monsterId);\n          await this.props.updateSavestate(savestate);\n        }\n        this.setState({ view: 'monster-result', completed: matchesExpected });\n      },\n      VKWebAppOpenQRFailed: (_) => {\n        this.setState({ view: 'monster-result', completed: false });\n      }\n    });\n  }\n\n  renderResultPanel({ name, spriteDefeated }) {\n    const completed = <>\n      <img className=\"monster-sprite\" alt={name} src={spriteDefeated} />\n      <p>Поздравляем, ты победил!</p>\n      <Button size=\"l\" level=\"1\" onClick={this.props.go} data-to=\"quest-map\">Далее</Button>\n    </>;\n    const failed = <>\n      <p>Очень жаль, но код неправильный :/</p>\n      <Button size=\"l\" level=\"1\" onClick={this.setView('monster-action')}>Вернуться</Button>\n    </>;\n    return (\n      <Panel id=\"monster-result\" theme=\"white\">\n        <PanelHeader>{name}</PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          {this.state.completed ? completed : failed}\n        </Div>\n      </Panel>\n    );\n  }\n}\n","import React from 'react';\nimport { Root, Div, Spinner } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport { setupVkIntegration } from './lib/vk';\nimport { initialSavestate } from './lib/savestate';\n\nimport Home from './views/Home';\nimport ColorTilesGame from './views/ColorTilesGame';\nimport QuestMap from './views/QuestMap';\nimport Monster from './views/Monster';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { view: 'home', perViewProps: {}, vk: null, savestate: null };\n  }\n\n  componentDidMount() {\n    setupVkIntegration(async (vk) => {\n      const storedState = await vk.storage.get('savestate');\n      const savestate = (storedState && storedState != \"\") ? JSON.parse(storedState) : initialSavestate;\n      this.setState({ vk, savestate })\n    });\n  }\n\n  render() {\n    if (!this.state.savestate) {\n      return (\n        <Div style={{ height: '100%' }}>\n          <Spinner size=\"large\" />\n        </Div>\n      );\n    }\n    return (\n      <Root activeView={this.state.view}>\n        <Home id=\"home\" user={this.state.vk && this.state.vk.user} go={this.go} />\n        <ColorTilesGame id=\"color-tiles-game\" go={this.go} />\n        <QuestMap id=\"quest-map\" go={this.go} savestate={this.state.savestate} />\n        <Monster id=\"monster\" go={this.go} send={this.state.vk && this.state.vk.send}\n          savestate={this.state.savestate} updateSavestate={this.updateSavestate}\n          {...this.state.perViewProps.monster} />\n      </Root>\n    );\n  }\n\n  go = (e) => {\n    const { to, ...props } = e.currentTarget.dataset;\n    this.setState({ view: to, perViewProps: { ...this.state.perViewProps, [to]: props } });\n  };\n\n  updateSavestate = async (newSavestate) => {\n    await this.state.vk.storage.set('savestate', JSON.stringify(newSavestate));\n    this.setState({ savestate: newSavestate });\n  }\n}\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/se_ifmo_ru.ea83b28a.png\";","module.exports = __webpack_public_path__ + \"static/media/blue.34464695.png\";","module.exports = __webpack_public_path__ + \"static/media/red.c083d19b.png\";","module.exports = __webpack_public_path__ + \"static/media/yellow.fc931dc4.png\";","module.exports = __webpack_public_path__ + \"static/media/green.1799831c.png\";"],"sourceRoot":""}