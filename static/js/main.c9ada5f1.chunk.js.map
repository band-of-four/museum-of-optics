{"version":3,"sources":["lib/vk.js","lib/savestate.js","views/Home.js","views/ColorTilesGame.js","views/QuestMap.js","lib/monsters.js","views/Monster.js","App.js","index.js","img/monsters/se_ifmo_ru.png","img/tiles/blue.png","img/tiles/red.png","img/tiles/yellow.png","img/tiles/green.png"],"names":["devMode","process","Vk","user","accessToken","_this","this","Object","classCallCheck","storage","set","key","value","Promise","resolve","localStorage","setItem","send","method","params","user_id","id","access_token","v","VKWebAppCallAPIMethodResult","get","getItem","_ref2","response","args","callbacks","tryInvokeEventCallback","qr_data","connect","handleResponse","_ref3","_ref3$detail","detail","type","data","console","log","concat","callback","subscribe","nodeLocations","x","y","pathGraph","1","2","3","4","5","6","initialSavestate","updateSavestateOnCompletion","oldSavestate","monsterId","newSavestate","objectSpread","defineProperty","forEach","item","i","child","Home","_ref","go","react_default","a","createElement","vkui","activePanel","title","before","photo_200","src","description","city","first_name","last_name","style","textAlign","size","level","onClick","data-to","stretched","ColorTilesGame","props","possibleConstructorReturn","getPrototypeOf","call","tileSelected","color","state","field","expectedPosition","initTask","answers","setState","currentPosition","nextTile","directions","direction","Math","floor","random","offset","relRoutes","routes","slice","reverse","initTaskTileSelected","theme","left","PanelHeaderBack_default","className","backgroundImage","blueTile","redTile","yellowTile","greenTile","React","Component","QuestMap","savestate","renderSvgMap","xmlns","width","height","viewBox","map","renderMapNode","nodeStates","cx","cy","r","data-monster-id","monsters","name","sprite","seIfmoRu","spriteDefeated","correctQr","hint","Monster","setView","view","applyQrCode","VKWebAppOpenQRResult","_VKWebAppOpenQRResult","asyncToGenerator","regenerator_default","mark","_callee","matchesExpected","wrap","_context","prev","next","updateSavestate","completed","stop","_x","apply","arguments","VKWebAppOpenQRFailed","_","monster","renderIntroPanel","renderHintPanel","renderActionPanel","renderResultPanel","alt","PanelHeaderClose_default","children","_ref4","_ref5","Fragment","failed","App","e","_e$currentTarget$data","currentTarget","dataset","to","objectWithoutProperties","perViewProps","vk","JSON","stringify","activeView","views_Home","ColorTilesGame_ColorTilesGame","QuestMap_QuestMap","Monster_Monster","assign","_this2","integrationCallback","initCallback","_ref$detail","app_id","unsubscribe","setupVkIntegration","_callee2","storedState","_context2","sent","alert","parse","_x2","ReactDOM","render","App_App","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.c9ada5f1.chunk.js","sourcesContent":["import connect from '@vkontakte/vkui-connect';\n\nconst devMode = process.env.NODE_ENV === 'development';\n\nexport function setupVkIntegration(integrationCallback) {\n  if (devMode) {\n    integrationCallback(new Vk(null, 'dev-access-token'));\n    return;\n  }\n\n  let user = null, accessToken = null;\n\n  function initCallback({ detail: { data, type } }) {\n    switch (type) {\n      case 'VKWebAppGetUserInfoResult':\n        user = data;\n        connect.send(\"VKWebAppGetAuthToken\", { app_id: 7017221 });\n        break;\n      case 'VKWebAppAccessTokenFailed':\n        connect.send(\"VKWebAppGetAuthToken\", { app_id: 7017221 });\n        break;\n      case 'VKWebAppAccessTokenReceived':\n        accessToken = data.access_token;\n        connect.unsubscribe(initCallback);\n        integrationCallback(new Vk(user, accessToken));\n        break;\n    }\n  }\n\n  connect.subscribe(initCallback);\n  connect.send('VKWebAppGetUserInfo', {});\n}\n\nexport class Vk {\n  constructor(user, accessToken) {\n    this.user = user;\n    this.accessToken = accessToken;\n    this.callbacks = {};\n    connect.subscribe(this.handleResponse);\n  }\n\n  storage = {\n    set: (key, value) => new Promise((resolve) => {\n      if (devMode)\n        resolve(localStorage.setItem(key, value));\n      else\n        this.send('VKWebAppCallAPIMethod', {\n          method: 'storage.set', params: {\n            key, value, user_id: this.user.id, access_token: this.accessToken, v: '5.95'\n          }\n        }, {\n          VKWebAppCallAPIMethodResult: resolve\n        });\n    }),\n    get: (key) => new Promise((resolve) => {\n      if (devMode)\n        resolve(localStorage.getItem(key))\n      else\n        this.send('VKWebAppCallAPIMethod', {\n          method: 'storage.get', params: {\n            key, user_id: this.user.id, access_token: this.accessToken, v: '5.95'\n          }\n        }, {\n          VKWebAppCallAPIMethodResult: ({ response }) => resolve(response)\n        });\n    })\n  }\n\n  /* callbacks is an object of { event type (string): callback function } */\n  send = (method, args, callbacks) => {\n    this.callbacks = callbacks;\n    if (!devMode) {\n      connect.send(method, args);\n    }\n    else {\n      /* In development mode, we need to mock API responses */\n      if (method === 'VKWebAppOpenQR') {\n        this.tryInvokeEventCallback('VKWebAppOpenQRResult', { qr_data: 'test' });\n      }\n    }\n  }\n\n  handleResponse = ({ detail: { type, data } }) => {\n    this.tryInvokeEventCallback(type, data) || console.log(`Unhandled connect event: ${type}`);\n  }\n\n  tryInvokeEventCallback = (type, data) => {\n    const callback = this.callbacks[type];\n    if (!callback) return false;\n\n    callback(data);\n    delete this.callbacks[type];\n    return true;\n  }\n}\n","export const nodeLocations = [\n  { x: 34, y: 8, id: 6 },\n  { x: 12, y: 35, id: 5 },\n  { x: 52, y: 52, id: 4 },\n  { x: 7, y: 76, id: 3 },\n  { x: 56, y: 94, id: 2 },\n  { x: 30, y: 128, id: 1 }\n];\n\nexport const pathGraph = { 1: [2], 2: [3, 4], 3: [5], 4: [5] , 5: [6], 6: [] };\n\nexport const initialSavestate = { 1: 'completed', 2: 'available', 3: 'locked', 4: 'locked', 5: 'locked', 6: 'locked' };\n\nexport function updateSavestateOnCompletion(oldSavestate, monsterId) {\n  const newSavestate = { ...oldSavestate, [monsterId]: 'completed' };\n  pathGraph[monsterId].forEach(function(item, i, child) {\n      newSavestate[child[i]] = 'available';\n  })\n  return newSavestate;\n}\n","import React from 'react';\nimport { View, Panel, ListItem, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\n\nconst Home = ({ id, go, user }) => (\n  <View id={id} activePanel=\"main\">\n    <Panel id=\"main\">\n      <PanelHeader>Квест</PanelHeader>\n      {user &&\n        <Group title=\"Привет\">\n          <ListItem\n            before={user.photo_200 ? <Avatar src={user.photo_200} /> : null}\n            description={(user.city && user.city.title) || ''}>\n            {`${user.first_name} ${user.last_name}`}\n          </ListItem>\n        </Group>}\n\n      <Group title=\"Выбери свой цвет\">\n        <Div style={{ textAlign: \"center\" }}>\n          <Button size=\"l\" level=\"1\" onClick={go} data-to=\"color-tiles-game\">Поехали</Button>\n        </Div>\n      </Group>\n\n      <Group title=\"Карта квеста\">\n        <Div style={{ textAlign: \"center\" }}>\n          <Button size=\"l\" level=\"1\" stretched={true} onClick={go} data-to=\"quest-map\">Посмотреть</Button>\n        </Div>\n      </Group>\n    </Panel>\n  </View>\n);\n\nexport default Home;\n","import React from 'react';\nimport { View, Panel, PanelHeader, Div } from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport '../css/ColorTilesGame.css';\nimport blueTile from '../img/tiles/blue.png';\nimport yellowTile from '../img/tiles/yellow.png';\nimport redTile from '../img/tiles/red.png';\nimport greenTile from '../img/tiles/green.png';\n\nexport default class ColorTilesGame extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      directions: 'Синяя или красная?',\n      answers: 0,\n      field: [\n        ['g', 'y', 'r', 'g', 'b', 'r'],\n        ['r', 'b', 'y', 'r', 'g', 'y'],\n        ['y', 'r', 'g', 'b', 'y', 'g'],\n        ['r', 'b', 'y', 'r', 'b', 'r'],\n        ['b', 'r', 'g', 'y', 'r', 'y'],\n        ['r', 'g', 'b', 'r', 'b', 'g']\n      ],\n      expectedPosition: [-1, -1],\n      initTask: true,\n      currentPosition: [-1, -1],\n      routes: ['left', 'up', 'right', 'down']\n    };\n  }\n\n  tileSelected = (color) => () => {\n    console.log(this.state.field[this.state.expectedPosition[0]]              \n      [this.state.expectedPosition[1]]);\n    if (this.state.initTask) {\n      return;\n    }\n    if (color != this.state.field[this.state.expectedPosition[0]]\n      [this.state.expectedPosition[1]]) {\n      this.setState({ initTask: true, answers: 0, directions: 'Неверно, попробуем ещё раз' });\n      return;\n    }\n    if (this.state.answers === 3) {\n      this.setState({ directions: 'Поздравляем, ты прошел игру)' });\n      return;\n    }\n    this.setState({ currentPosition: this.state.expectedPosition });\n    this.nextTile(this.state.expectedPosition[0], this.state.expectedPosition[1]);\n\n    this.setState({ answers: this.state.answers + 1 });\n  }\n\n  nextTile = (x, y) => {\n    var direction = Math.floor(Math.random() * 4); // random int [0; 3]\n    // 0 - left, 1 - up, 2 - right, 3 - down\n    while (\n      (direction == 0 && y == 0) ||\n      (direction == 1 && x == 0) ||\n      (direction == 2 && y == 5) ||\n      (direction == 3 && x == 5)\n    )\n      direction = Math.floor(Math.random() * 4);\n    var offset = 0, relRoutes = this.state.routes;\n    if (this.state.initTask)\n      relRoutes = ['left', 'up', 'right', 'down'];\n    switch (direction) {\n      case 0:\n        relRoutes = relRoutes.slice(1).concat(relRoutes.slice(0,1));\n        offset = 1 + Math.floor(Math.random() * y);\n        this.setState({ expectedPosition: [x, y - offset] });\n        break;\n      case 1:\n        offset = 1 + Math.floor(Math.random() * x);\n        this.setState({ expectedPosition: [x - offset, y] });\n        break;\n      case 2:\n        relRoutes = relRoutes.slice(1).reverse().concat(relRoutes.slice(0,1));\n        offset = 1 + Math.floor(Math.random() * (5 - y));\n        this.setState({ expectedPosition: [x, y + offset] });\n        break;\n      case 3:\n        relRoutes = relRoutes.slice(2).concat(relRoutes.slice(0,2));\n        offset = 1 + Math.floor(Math.random() * (5 - x));\n        this.setState({ expectedPosition: [x + offset, y] });\n        break;\n    }\n    this.setState({ directions: `${this.state.routes[direction]}, ${offset}`, routes: relRoutes });\n  }\n\n  initTaskTileSelected = (color) => () => {\n    var x = 5, y;\n    if (color == 'b')\n      y = 2;\n    else\n      y = 3;\n    this.setState({ initTask: false, currentPosition: [x, y] });\n    this.nextTile(x, y);\n  }\n\n  render() {\n    return (\n      <View id={this.props.id} activePanel={this.state.initTask ? 'color-tiles-init-task' : 'color-tiles-main'}>\n        <Panel id=\"color-tiles-init-task\" theme=\"white\">\n          <PanelHeader left={<PanelHeaderBack onClick={this.props.go} data-to=\"home\" />}>\n            Какой цвет твой?\n          </PanelHeader>\n          <Div>\n            <div className=\"tile-directions\">{this.state.directions}</div>\n            <div className=\"tile-row\">\n              <button onClick={this.initTaskTileSelected('b')} className=\"tile-button\" style={{ backgroundImage: `url('${blueTile}')` }} />\n              <button onClick={this.initTaskTileSelected('r')} className=\"tile-button\" style={{ backgroundImage: `url('${redTile}')` }} />\n            </div>\n          </Div>\n        </Panel>\n        <Panel id=\"color-tiles-main\" theme=\"white\">\n          <PanelHeader left={<PanelHeaderBack onClick={this.props.go} data-to=\"home\" />}>\n            Какой цвет твой?\n          </PanelHeader>\n          <Div>\n            <div className=\"tile-directions\">{this.state.directions}</div>\n            <div className=\"tile-row\">\n              <button onClick={this.tileSelected('b')} className=\"tile-button\" style={{ backgroundImage: `url('${blueTile}')` }} />\n              <button onClick={this.tileSelected('r')} className=\"tile-button\" style={{ backgroundImage: `url('${redTile}')` }} />\n            </div>\n            <div className=\"tile-row\">\n              <button onClick={this.tileSelected('y')} className=\"tile-button\" style={{ backgroundImage: `url('${yellowTile}')` }} />\n              <button onClick={this.tileSelected('g')} className=\"tile-button\" style={{ backgroundImage: `url('${greenTile}')` }} />\n            </div>\n            <div className=\"tile-help\">\n              Встань лицом к каталогу Аббе\n            </div>\n          </Div>\n        </Panel>\n      </View>\n    );\n  }\n}\n","import React from 'react';\nimport { View, Panel, PanelHeader, Div, Spinner } from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport '../css/QuestMap.css';\nimport { nodeLocations } from '../lib/savestate';\n\nexport default function QuestMap({ id, go, savestate }) {\n  return (\n    <View id={id} activePanel=\"quest-map-main\">\n      <Panel id=\"quest-map-main\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderBack onClick={go} data-to=\"home\" />}>\n          Карта\n        </PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          {savestate ? renderSvgMap(savestate, go) : <Spinner size=\"large\" />}\n        </Div>\n      </Panel>\n    </View>\n  );\n}\n\nconst renderSvgMap = (savestate, go) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"240\" height=\"510\" viewBox=\"0 0 63.5 134.9\">\n    {nodeLocations.map(renderMapNode(savestate, go))}\n  </svg>\n);\n\nconst renderMapNode = (nodeStates, go) => ({ x, y, id }) => {\n  switch (nodeStates[id]) {\n    case 'completed':\n      return <circle key={id} cx={x} cy={y} r=\"6\" className=\"map-node--completed\" />;\n    case 'locked':\n      return <circle key={id} cx={x} cy={y} r=\"6\" className=\"map-node--locked\" />\n    case 'available':\n      return <circle key={id} cx={x} cy={y} r=\"6\" className=\"map-node--available\"\n        onClick={go} data-to=\"monster\" data-monster-id={id} />;\n  }\n}\n","import React from 'react';\nimport seIfmoRu from '../img/monsters/se_ifmo_ru.png';\n\nconst monsters = {\n  3: {\n      name: 'Лекция Калинина',\n      sprite: seIfmoRu,\n      spriteDefeated: seIfmoRu,\n      description: 'Посчитайте вероятность того, что Калинин придет на лекцию?',\n      correctQr: 'test',\n      hint: (\n        <p>\n          Добрый день, я Игорь Владимирович, и сегодня мы будем заниматься теорвером.\n        </p>\n\t\t\t)\n\t\t},\n  2: {\n    name: 'Утиная типизация',\n    sprite: seIfmoRu,\n    spriteDefeated: seIfmoRu,\n    description: 'И сколько в твоем интерпретаторе сегфолтов?',\n    correctQr: 'test',\n    hint: (\n      <p>\n        Добрый день, я Утинатор, и сегодня я хочу рассказать вам о том,\n        почему вы должны бросить все дела и заставить себя учить Форт.\n      </p>\n    )\n  }\n};\n\nexport default monsters;\n","import React from 'react';\nimport { View, Panel, PanelHeader, Div, Button } from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport PanelHeaderClose from '@vkontakte/vkui/dist/components/PanelHeaderClose/PanelHeaderClose';\nimport '../css/Monster.css';\nimport monsters from '../lib/monsters';\nimport { updateSavestateOnCompletion } from '../lib/savestate';\n\nexport default class Monster extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { view: 'monster-intro' }\n  }\n\n  render() {\n    const monster = monsters[this.props.monsterId];\n    return (\n      <View id={this.props.id} activePanel={this.state.view}>\n        {this.renderIntroPanel(monster)}\n        {this.renderHintPanel(monster)}\n        {this.renderActionPanel(monster)}\n        {this.renderResultPanel(monster)}\n      </View>\n    );\n  }\n\n  setView = (view) => () => this.setState({ view });\n\n  renderIntroPanel({ name, sprite, description }) {\n    return (\n      <Panel id=\"monster-intro\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderBack onClick={this.props.go} data-to=\"quest-map\" />}>\n          {name}\n        </PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          <img className=\"monster-sprite\" alt={name} src={sprite} />\n          <p>{description}</p>\n          <div className=\"button-row\">\n            <Button size=\"l\" level=\"1\" onClick={this.setView('monster-action')}>В бой</Button>\n            <Button size=\"l\" level=\"2\" onClick={this.setView('monster-hint')}>Подсказка</Button>\n          </div>\n        </Div>\n      </Panel>\n    );\n  }\n\n  renderHintPanel({ name, hint }) {\n    return (\n      <Panel id=\"monster-hint\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderClose children=\"Закрыть\" onClick={this.setView('monster-intro')} />}>\n          {name}\n        </PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>{hint}</Div>\n      </Panel>\n    );\n  }\n\n  renderActionPanel({ name, correctQr }) {\n    return (\n      <Panel id=\"monster-action\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderClose children=\"Закрыть\" onClick={this.setView('monster-intro')} />}>\n          {name}\n        </PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          <div>\n            <Button size=\"l\" level=\"1\" onClick={this.applyQrCode(correctQr)}>Применить</Button>\n          </div>\n        </Div>\n      </Panel>\n    );\n  }\n\n  applyQrCode = (correctQr) => () => {\n    this.props.send('VKWebAppOpenQR', {}, {\n      VKWebAppOpenQRResult: async ({ qr_data }) => {\n        const matchesExpected = qr_data == correctQr;\n        if (matchesExpected) {\n          const savestate = updateSavestateOnCompletion(this.props.savestate, this.props.monsterId);\n          await this.props.updateSavestate(savestate);\n        }\n        this.setState({ view: 'monster-result', completed: matchesExpected });\n      },\n      VKWebAppOpenQRFailed: (_) => {\n        this.setState({ view: 'monster-result', completed: false });\n      }\n    });\n  }\n\n  renderResultPanel({ name, spriteDefeated }) {\n    const completed = <>\n      <img className=\"monster-sprite\" alt={name} src={spriteDefeated} />\n      <p>Поздравляем, ты победил!</p>\n      <Button size=\"l\" level=\"1\" onClick={this.props.go} data-to=\"quest-map\">Далее</Button>\n    </>;\n    const failed = <>\n      <p>Очень жаль, но код неправильный :/</p>\n      <Button size=\"l\" level=\"1\" onClick={this.setView('monster-action')}>Вернуться</Button>\n    </>;\n    return (\n      <Panel id=\"monster-result\" theme=\"white\">\n        <PanelHeader>{name}</PanelHeader>\n        <Div style={{ textAlign: \"center\" }}>\n          {this.state.completed ? completed : failed}\n        </Div>\n      </Panel>\n    );\n  }\n}\n","import React from 'react';\nimport { Root } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport { setupVkIntegration } from './lib/vk';\nimport { initialSavestate } from './lib/savestate';\n\nimport Home from './views/Home';\nimport ColorTilesGame from './views/ColorTilesGame';\nimport QuestMap from './views/QuestMap';\nimport Monster from './views/Monster';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { view: 'home', perViewProps: {}, vk: null, savestate: null };\n  }\n\n  render() {\n    return (\n      <Root activeView={this.state.view}>\n        <Home id=\"home\" user={this.state.vk && this.state.vk.user} go={this.go} />\n        <ColorTilesGame id=\"color-tiles-game\" go={this.go} />\n        <QuestMap id=\"quest-map\" go={this.go} savestate={this.state.savestate} />\n        <Monster id=\"monster\" go={this.go} send={this.state.vk && this.state.vk.send}\n          savestate={this.state.savestate} updateSavestate={this.updateSavestate}\n          {...this.state.perViewProps.monster} />\n      </Root>\n    );\n  }\n\n  go = (e) => {\n    const { to, ...props } = e.currentTarget.dataset;\n    this.setState({ view: to, perViewProps: { ...this.state.perViewProps, [to]: props } });\n  };\n\n  updateSavestate = async (newSavestate) => {\n    await this.state.vk.storage.set('savestate', JSON.stringify(newSavestate));\n    this.setState({ savestate: newSavestate });\n  }\n\n  componentDidMount() {\n    setupVkIntegration(async (vk) => {\n      const storedState = await vk.storage.get('savestate');\n      alert(`Savestate: \"${storedState}\"`);\n      const savestate = (storedState && storedState != \"\") ? JSON.parse(storedState) : initialSavestate;\n      this.setState({ vk, savestate })\n    });\n  }\n}\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/se_ifmo_ru.ea83b28a.png\";","module.exports = __webpack_public_path__ + \"static/media/blue.34464695.png\";","module.exports = __webpack_public_path__ + \"static/media/red.c083d19b.png\";","module.exports = __webpack_public_path__ + \"static/media/yellow.fc931dc4.png\";","module.exports = __webpack_public_path__ + \"static/media/green.1799831c.png\";"],"sourceRoot":""}