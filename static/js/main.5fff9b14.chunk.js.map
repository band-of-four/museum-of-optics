{"version":3,"sources":["img/monsters/specular.png","img/tiles/blue.png","img/tiles/yellow.png","img/tiles/red.png","img/tiles/green.png","img/qr-code-example.svg","img/monsters/heavy_knight.png","img/monsters/heavy_knight_defeated.png","img/monsters/forgotten_fortress.png","img/monsters/forgotten_fortress_defeated.png","img/monsters/medusa.png","img/monsters/medusa_defeated.png","img/monsters/troll_3d.png","img/monsters/troll_3d_defeated.png","img/monsters/violet_demon.png","img/monsters/violet_demon_defeated.png","img/monsters/nightmare.png","img/monsters/nightmare_defeated.png","img/monsters/shadow.png","img/monsters/shadow_defeated.png","img/monsters/stereozavr.png","img/monsters/stereozavr_defeated.png","img/monsters/cylindemon.png","img/monsters/cylindemon_defeated.png","lib/vk.js","lib/savestate.js","components/ActionLayout.js","views/Intro.js","components/ColorRibbon.js","components/ColorTiles.js","lib/ColorTilesGame.js","views/ColorTilesGame.js","views/QuestMap.js","views/QuestMapHelp.js","lib/monsters.js","views/Monster.js","lib/forest.js","views/Forest.js","views/CompletedQuest.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","devMode","process","applicationId","Vk","user","accessToken","_this","this","Object","classCallCheck","storage","set","key","value","Promise","resolve","localStorage","setItem","send","method","params","user_id","id","access_token","v","VKWebAppCallAPIMethodResult","get","getItem","_ref2","response","args","callbacks","tryInvokeEventCallback","qr_data","connect","handleResponse","_ref3","_ref3$detail","detail","type","data","console","log","concat","callback","firstName","first_name","gender","sex","subscribe","nodeLocations","x","y","nodePaths","nodes","strokeDasharray","strokeDashoffset","d","pathGraph","1","2","3","4","5","6","7","8","9","10","initialSavestate","0","updateSavestateOnCompletion","oldSavestate","monsterId","newSavestate","objectSpread","defineProperty","forEach","node","isForestUnlocked","savestate","values","every","n","ActionLayout","props","react_default","a","createElement","Fragment","className","children","vkui","vertical","primary","renderButton","secondary","_ref","level","slicedToArray","label","assign","size","Intro","startQuest","genderify","playerName","activePanel","theme","ActionLayout_ActionLayout","onClick","ColorRibbon","itemClass","animated","colors","map","c","i","tileUrls","b","blueTile","r","redTile","yellowTile","g","greenTile","ColorTiles","wrapperClass","inline","containerClass","buttonClass","buttons","color","style","backgroundImage","labels","slice","field","computeTurn","turnstate","routes","_computeNextTile","computeNextTile","_computeNextTile2","nextDirection","nextTurnstate","_computeNextTile3","_computeNextTile4","direction","Math","floor","random","offset","newDirection","explainTurn","INIT","INIT_TRANSITION","TURN","TURN_TRANSITION","RETRY_TRANSITION","RETRY","RETRY_INIT_TRANSITION","WIN_TRANSITION","WIN","initialDirections","animationDuration","ColorTilesGame","possibleConstructorReturn","getPrototypeOf","call","setViewAfterAnimation","view","setTimeout","setState","tileSelected","state","_computeInitTurn","computeInitTurn","_computeInitTurn2","directions","newTurnstate","length","_newTurnstate","onClickRetryButton","onClickWinButton","onCompletion","tilesOnClick","undefined","centered","noShadow","ColorRibbon_ColorRibbon","ColorTiles_ColorTiles","renderRetryMessage","renderWinMessage","animationClass","React","Component","QuestMap","go","attachOnTransition","mapBottomRef","useRef","useEffect","from","isSavestateEmpty","current","requestAnimationFrame","scrollIntoView","behavior","helpButton","data-to","help_outline_default","left","xmlns","viewBox","renderMapNode","renderForest","renderPaths","ref","data-monster-id","cx","cy","forestUnlocked","strokeLinejoin","_ref$nodes","to","svg","objectWithoutProperties","computePaths","QuestMapHelp","backButton","done_outline_default","width","height","monsters","name","sprite","HeavyKnight","spriteDefeated","HeavyKnightDefeated","description","correctQr","hint","onVictory","ForgottenFortress","ForgottenFortressDefeated","Specular","fx","CylinDemon","CylinDemonDefeated","Troll3D","Troll3Defeated","VioletDemon","VioletDemonDefeated","Nightmare","NightmareDefeated","Shadow","ShadowDefeated","Stereozavr","StereozavrDefeated","Medusa","MedusaDefeated","Monster","setView","applyQrCode","VKWebAppOpenQRResult","_VKWebAppOpenQRResult","asyncToGenerator","regenerator_default","mark","_callee","matchesExpected","wrap","_context","prev","next","updateSavestate","completed","stop","_x","apply","arguments","VKWebAppOpenQRFailed","_","monster","renderIntroPanel","renderHintPanel","renderActionPanel","renderResultPanel","_ref2$fx","PanelHeaderBack_default","alt","src","includes","_ref4","PanelHeaderClose_default","qrCodeExample","maxWidth","_ref5","failed","forestLetters","rosettaStone","Forest","showLetterPopout","index","letters","letter","letterTransition","popout","onClose","autoclose","onClickLetterHandlers","_this2","letterLabels","l","transitionClass","CompletedQuest","completionDate","resetGame","toLocaleDateString","App","m","f","vk","e","_e$currentTarget$data","currentTarget","dataset","perViewProps","assignQuestMapOnTransition","onTransition","quest-map","saveGameColors","JSON","stringify","_callee2","_context2","_x2","finishQuest","_callee3","_context3","Date","toJSON","resetSavestate","_callee4","_context4","integrationCallback","initCallback","_ref$detail","app_id","unsubscribe","setupVkIntegration","_ref6","_callee5","storedColors","storedState","storedCompletion","_context5","sent","parse","t0","t1","_x3","_this3","activeView","ColorTilesGame_ColorTilesGame","QuestMap_QuestMap","Monster_Monster","Forest_Forest","CompletedQuest_CompletedQuest","smoothscroll","ReactDOM","render","App_App","document","getElementById"],"mappings":"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","file":"static/js/main.5fff9b14.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/specular.b330c486.png\";","module.exports = __webpack_public_path__ + \"static/media/blue.34464695.png\";","module.exports = __webpack_public_path__ + \"static/media/yellow.fc931dc4.png\";","module.exports = __webpack_public_path__ + \"static/media/red.c083d19b.png\";","module.exports = __webpack_public_path__ + \"static/media/green.1799831c.png\";","module.exports = __webpack_public_path__ + \"static/media/qr-code-example.178a5313.svg\";","module.exports = __webpack_public_path__ + \"static/media/heavy_knight.70af7c1e.png\";","module.exports = __webpack_public_path__ + \"static/media/heavy_knight_defeated.3cf676c8.png\";","module.exports = __webpack_public_path__ + \"static/media/forgotten_fortress.08ac9a3c.png\";","module.exports = __webpack_public_path__ + \"static/media/forgotten_fortress_defeated.85f7d86a.png\";","module.exports = __webpack_public_path__ + \"static/media/medusa.84f6ee0a.png\";","module.exports = __webpack_public_path__ + \"static/media/medusa_defeated.3974d41f.png\";","module.exports = __webpack_public_path__ + \"static/media/troll_3d.584910ed.png\";","module.exports = __webpack_public_path__ + \"static/media/troll_3d_defeated.d3134f43.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABNAAAARECAIAAAA7p3vnAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4wYXFTEPUoUisgAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAABVGSURBVHja7dcxEQAACMQwwL/nxwTHlEjo1k5SAAAAcG0kAAAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAACA4QQAAMBwAgAAYDgBAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAgOEEAADAcAIAAGA4AQAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAgOEEAADAcAIAAGA4AQAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAACA4QQAAMBwAgAAYDgBAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAACA4QQAAMBwAgAAYDgBAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAgOEEAADAcAIAAGA4AQAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAABgOCUAAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAgOEEAADAcAIAAGA4AQAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAACA4QQAAMBwAgAAYDgBAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAgOEEAADAcAIAAGA4AQAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAACA4QQAAMBwAgAAYDgBAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAgOEEAADAcAIAAGA4AQAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAgOEEAADAcAIAAGA4AQAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAACA4QQAAMBwAgAAYDgBAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAGA4JQAAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAgOEEAADAcAIAAGA4AQAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAACA4QQAAMBwAgAAYDgBAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAACA4QQAAMBwAgAAYDgBAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAgOEEAADAcAIAAGA4AQAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAACA4QQAAMBwAgAAYDgBAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAgOEEAADAcAIAAGA4AQAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAACA4QQAAMBwAgAAYDgBAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAYDglAAAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAACA4QQAAMBwAgAAYDgBAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAgOEEAADAcAIAAGA4AQAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAgOEEAADAcAIAAGA4AQAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAACA4QQAAMBwAgAAYDgBAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAACA4QQAAMBwAgAAYDgBAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAgOEEAADAcAIAAGA4AQAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAAMJwAAAIYTAAAADCcAAACGEwAAAMMJAAAAhhMAAADDCQAAgOEEAAAAwwkAAIDhBAAAwHACAABgOCUAAADAcAIAAGA4AQAAMJwAAABgOAEAADCcAAAAGE4AAAAwnAAAABhOAAAADCcAAAAYTgAAAAwnAAAAhhMAAAAMJwAAAIYTAAAAwwkAAACGEwAAAMMJAACA4QQAAADDCQAAgOEEAADAcAIAAIDhBAAAwHACAABgOAEAAMBwAgAAYDgBAAAwnAAAAGA4AQAAMJwAAAAYTgAAADCcAAAAGE4AAAAMJwAAABhOAAAADCcAAACGEwAAAAwnAAAAhhMAAADDCQAAAIYTAAAAwwkAAIDhBAAAAMMJAACA4QQAAMBwAgAAgOEEAADAcAIAAGA4AQAAwHACAABgOAEAADCcAAAAYDgBAAAwnAAAABhOAAAAMJwAAAAYTgAAAAwnAAAAGE4AAAC+Lf7tC4UIcE6xAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/violet_demon_defeated.73290a56.png\";","module.exports = __webpack_public_path__ + \"static/media/nightmare.fc284a70.png\";","module.exports = __webpack_public_path__ + \"static/media/nightmare_defeated.fdd98744.png\";","module.exports = __webpack_public_path__ + \"static/media/shadow.0e981d8b.png\";","module.exports = __webpack_public_path__ + \"static/media/shadow_defeated.2c14830e.png\";","module.exports = __webpack_public_path__ + \"static/media/stereozavr.3b2af9ce.png\";","module.exports = __webpack_public_path__ + \"static/media/stereozavr_defeated.549d24d4.png\";","module.exports = __webpack_public_path__ + \"static/media/cylindemon.e9ebff9b.png\";","module.exports = __webpack_public_path__ + \"static/media/cylindemon_defeated.aca6e4c3.png\";","import connect from '@vkontakte/vkui-connect';\n\nconst devMode = process.env.NODE_ENV === 'development';\n\n// TODO: move this to a configurable option\n// const applicationId = 7017221; // development id\nconst applicationId = 7040167;\n\nexport function setupVkIntegration(integrationCallback) {\n  if (devMode) {\n    integrationCallback(new Vk({ sex: 0 }, 'dev-access-token'));\n    return;\n  }\n\n  let user = null, accessToken = null;\n\n  function initCallback({ detail: { data, type } }) {\n    switch (type) {\n      case 'VKWebAppGetUserInfoResult':\n        user = data;\n        connect.send(\"VKWebAppGetAuthToken\", { app_id: applicationId });\n        break;\n      case 'VKWebAppAccessTokenFailed':\n        connect.send(\"VKWebAppGetAuthToken\", { app_id: applicationId });\n        break;\n      case 'VKWebAppAccessTokenReceived':\n        accessToken = data.access_token;\n        connect.unsubscribe(initCallback);\n        integrationCallback(new Vk(user, accessToken));\n        break;\n    }\n  }\n\n  connect.subscribe(initCallback);\n  connect.send('VKWebAppGetUserInfo', {});\n}\n\nexport class Vk {\n  constructor(user, accessToken) {\n    this.user = {\n      firstName: user.first_name || 'Странник',\n      gender: user.sex === 1 ? 'female' : 'male'\n    };\n    this.accessToken = accessToken;\n    this.callbacks = {};\n    connect.subscribe(this.handleResponse);\n  }\n\n  storage = {\n    set: (key, value) => new Promise((resolve) => {\n      if (devMode)\n        resolve(localStorage.setItem(key, value));\n      else\n        this.send('VKWebAppCallAPIMethod', {\n          method: 'storage.set', params: {\n            key, value, user_id: this.user.id, access_token: this.accessToken, v: '5.95'\n          }\n        }, {\n          VKWebAppCallAPIMethodResult: resolve\n        });\n    }),\n    get: (key) => new Promise((resolve) => {\n      if (devMode)\n        resolve(localStorage.getItem(key))\n      else\n        this.send('VKWebAppCallAPIMethod', {\n          method: 'storage.get', params: {\n            key, user_id: this.user.id, access_token: this.accessToken, v: '5.95'\n          }\n        }, {\n          VKWebAppCallAPIMethodResult: ({ response }) => resolve(response)\n        });\n    })\n  }\n\n  /* callbacks is an object of { event type (string): callback function } */\n  send = (method, args, callbacks) => {\n    this.callbacks = callbacks;\n    if (!devMode) {\n      connect.send(method, args);\n    }\n    else {\n      /* In development mode, we need to mock API responses */\n      if (method === 'VKWebAppOpenQR') {\n        this.tryInvokeEventCallback('VKWebAppOpenQRResult', { qr_data: 'test' });\n      }\n    }\n  }\n\n  handleResponse = ({ detail: { type, data } }) => {\n    this.tryInvokeEventCallback(type, data) || console.log(`Unhandled connect event: ${type}`);\n  }\n\n  tryInvokeEventCallback = (type, data) => {\n    const callback = this.callbacks[type];\n    if (!callback) return false;\n\n    callback(data);\n    delete this.callbacks[type];\n    return true;\n  }\n}\n","export const nodeLocations = [\n  { x: 10, y: 47.5, id: 10 },\n  { x: 9, y: 80, id: 9 },\n  { x: 21.5, y: 108, id: 8 },\n  { x: 56.5, y: 58, id: 7 },\n  { x: 57, y: 98, id: 6 },\n  { x: 40, y: 134, id: 5 },\n  { x: 6.5, y: 165.5, id: 4 },\n  { x: 7, y: 205, id: 3 },\n  { x: 58.5, y: 176.5, id: 2 },\n  { x: 59, y: 225, id: 1 },\n  { x: 35, y: 257, id: 0 }\n];\n\nconst nodePaths = [\n  { nodes: [0, 3], strokeDasharray: \"4.8000001, 4.8000001\", strokeDashoffset: \"7.6\", d: \"M30.4 252.5c-2.8-4.4-17.8-23.6-21.5-40.7\" },\n  { nodes: [0, 1], strokeDasharray: \"4.80000033, 4.80000033\", strokeDashoffset: \"7.6\", d: \"M39.1 252.3l16-20.7\" },\n  { nodes: [3, 4], strokeDasharray: \"4.80000015, 4.80000015\", strokeDashoffset: \"7.6\", d: \"M6.1 199.1c-.7-4.8-1-20-.6-26.2\" },\n  { nodes: [1, 2], strokeDasharray: \"4.80000033, 4.80000033\", strokeDashoffset: \".7\", d: \"M60.2 217.3s.8-26.5-.7-34\" },\n  { nodes: [4, 5], strokeDasharray: \"4.80000033, 4.80000033\", strokeDashoffset: \"9.4\", d: \"M9.7 158.5c10-10.8 23.7-20.2 23.7-20.2\" },\n  { nodes: [2, 5], strokeDasharray: \"4.80000038, 4.80000038\", strokeDashoffset: \".7\", d: \"M57.5 168.5S50 150 43.7 140.8\" },\n  { nodes: [5, 8], strokeDasharray: \"4.80000028, 4.80000028\", strokeDashoffset: \"8\", d: \"M36.5 127.5s-10.2-10.1-11.3-13.7\" },\n  { nodes: [5, 6], strokeDasharray: \"4.80000028, 4.80000028\", strokeDashoffset: \"8.3\", d: \"M41.7 127.4s12.4-18 13.4-24.1\" },\n  { nodes: [8, 9], strokeDasharray: \"4.80000028, 4.80000028\", strokeDashoffset: \"7.8\", d: \"M18.2 102.7c-3-4.4-5.8-11-7-16.2\" },\n  { nodes: [6, 7], strokeDasharray: \"4.80000028, 4.80000028\", strokeDashoffset: \"8.6\", d: \"M58 90.7s2.8-14.4.1-26\" },\n  { nodes: [9, 10], strokeDasharray: \"4.91087901, 4.91087901\", strokeDashoffset: \"8\", d: \"M8 72.6s-1.6-8.5.2-17.8\" },\n  { nodes: [10, 'forest'], strokeDasharray: \"4.91200037, 4.91200037\", strokeDashoffset: \"9.3\", d: \"M11.4 40.3S22 25.2 27.5 19.9\" },\n  { nodes: [7, 'forest'], strokeDasharray: \"4.80000033, 4.80000033\", strokeDashoffset: \"8.6\", d: \"M55.8 51.2s-4.8-18.3-15-31.6\" }\n];\n\nconst pathGraph = { 1: [2], 2: [5], 3: [4], 4: [5], 5: [6, 8], 6: [7], 7: [], 8: [9], 9: [10], 10: [] };\n\nexport const initialSavestate = {\n  0: 'completed', 1: 'available', 2: 'locked', 3: 'available', 4: 'locked', 5: 'locked',\n  6: 'locked', 7: 'locked', 8: 'locked', 9: 'locked', 10: 'locked'\n};\n\nexport function updateSavestateOnCompletion(oldSavestate, monsterId) {\n  const newSavestate = { ...oldSavestate, [monsterId]: 'completed' };\n  pathGraph[monsterId].forEach((node) => {\n    if (newSavestate[node] !== 'completed')\n      newSavestate[node] = 'available';\n  })\n  return newSavestate;\n}\n\nexport function computePaths(savestate) {\n  const forestUnlocked = isForestUnlocked(savestate);\n  return nodePaths.map(({ nodes: [from, to], ...svg }) => {\n    if (to === 'forest' && !forestUnlocked)\n      return { state: 'locked', ...svg };\n    if (savestate[from] === 'locked' || savestate[from] === 'available')\n      return { state: 'locked', ...svg };\n    if (savestate[from] === 'completed' && savestate[to] === 'completed')\n      return { state: 'completed', ...svg };\n    return { state: 'available', ...svg };\n  });\n}\n\nexport function isForestUnlocked(savestate) {\n  return Object.values(savestate).every((n) => n === 'completed');\n}\n\nexport function isSavestateEmpty(savestate) {\n  return savestate[1] === 'available' && savestate[3] === 'available';\n}\n","import React from 'react';\nimport { Button, FixedLayout } from '@vkontakte/vkui';\nimport '../css/ActionLayout.css';\n\n/* children: main area content\n * primary: an array of ['button label', button props object]\n * secondary: an array of ['button label', button props object]\n */\nexport default function ActionLayout(props) {\n  return <>\n    <div className=\"action-layout__content\">\n      {props.children}\n    </div>\n    <FixedLayout vertical=\"bottom\">\n      <div className=\"action-layout__buttons\">\n        {props.primary && renderButton(props.primary, 'primary')}\n        {props.secondary && renderButton(props.secondary, 'secondary')}\n      </div>\n    </FixedLayout>\n  </>;\n}\n\nfunction renderButton([ label, props ], level) {\n  return <Button size=\"xl\" level={level} {...props}>{label}</Button>;\n}\n","import React from 'react';\nimport { View, Panel, PanelHeader } from '@vkontakte/vkui';\nimport ActionLayout from '../components/ActionLayout';\n\nexport default function Intro({ id, startQuest, genderify, playerName }) {\n  return (\n    <View id={id} activePanel=\"intro-main\">\n      <Panel id=\"intro-main\" theme=\"white\">\n        <PanelHeader>Секреты Ордена Оптики</PanelHeader>\n        <ActionLayout primary={['Начнем', { onClick: startQuest }]}>\n          <p>\n            Добро пожаловать в Резиденцию!\n          </p>\n          <p>\n            Мы ждали тебя, {playerName}. \n            Полагаю, ты {genderify('пришел', 'пришла')} сюда, чтобы освоить чудеса оптической магии?\n            Тогда ты по адресу, ведь Магистры Ордена Оптики — самые большие мастера в этой сфере.\n          </p>\n          <p>\n            Чтобы получить доступ к тайнам, тебе предстоит пройти обряд инициации и стать последователем Ордена.\n            Ты {genderify('готов', 'готова')} открыть глаза и увидеть другой мир? Тогда вперед за званием адепта Ордена Оптики.\n            Следуй дальнейшим указаниям, и пусть удача сопутствует тебе на этом пути!\n          </p>\n        </ActionLayout>\n      </Panel>\n    </View>\n  );\n}\n","import React from 'react';\nimport '../css/ColorRibbon.css';\n\nexport default function ColorRibbon(props) {\n  const itemClass = props.animated ? 'color-ribbon__item color-ribbon__item--animated' : 'color-ribbon__item';\n  return (\n    <div className=\"color-ribbon\">\n      {props.colors.map((c, i) =>\n        <div key={i} className={`${itemClass} color-ribbon__item--${c}`}></div>)}\n    </div>\n  );\n}\n","import React from 'react';\nimport '../css/ColorTiles.css';\nimport blueTile from '../img/tiles/blue.png';\nimport yellowTile from '../img/tiles/yellow.png';\nimport redTile from '../img/tiles/red.png';\nimport greenTile from '../img/tiles/green.png';\n\nconst tileUrls = {\n  b: `url('${blueTile}')`,\n  r: `url('${redTile}')`,\n  y: `url('${yellowTile}')`,\n  g: `url('${greenTile}')`\n};\n\n// colors: an array of 4 items, each one of 'b', 'r', 'y', 'g'\n// onClick: an array of 4 callback functions, one for each of the buttons\n// labels: (optional) an array of 4 elements, one for each of the buttons\nexport default function ColorTiles(props) {\n  const wrapperClass = 'ColorTiles__wrapper' + (props.inline ? ' ColorTiles__wrapper--inline' : '');\n  const containerClass = (props.containerClass || '') + (props.inline ? ' ColorTiles__container--inline' : '');\n  const buttonClass = (props.buttonClass || '') + ' ColorTiles__button' + (props.inline ? ' ColorTiles__button--inline' : '');\n\n  const buttons = props.colors.map((color, i) =>\n    <button key={i} onClick={props.onClick[i]} className={buttonClass} style={{ backgroundImage: tileUrls[color] }}>\n      <span className=\"ColorTiles__button__fill\" />\n      {props.labels && props.labels[i]}\n    </button>\n  );\n\n  return (\n    <div className={wrapperClass}>\n      <div className={containerClass}>\n        <div>{buttons.slice(0, 2)}</div>\n        <div>{buttons.slice(2, 4)}</div>\n      </div>\n      {props.children}\n    </div>\n  );\n}\n","const field = [\n  ['g', 'y', 'r', 'g', 'b', 'r'],\n  ['r', 'b', 'y', 'r', 'g', 'y'],\n  ['y', 'r', 'g', 'b', 'y', 'g'],\n  ['r', 'b', 'y', 'r', 'b', 'r'],\n  ['b', 'r', 'g', 'y', 'r', 'y'],\n  ['r', 'g', 'b', 'r', 'b', 'g']\n];\n\nexport function computeTurn(color, turnstate) {\n  let { x, y, routes } = turnstate;\n  if (color !== field[x][y]) // wrong answer\n    return null;\n\n  let [nextDirection, nextTurnstate] = computeNextTile(x, y, routes);\n  while (color === field[nextTurnstate.x][nextTurnstate.y]) {\n    [nextDirection, nextTurnstate] = computeNextTile(x, y, routes);\n  }\n  return [nextDirection, nextTurnstate];\n}\n\nfunction computeNextTile(x, y, routes) {\n  // compute next tile\n  let direction = Math.floor(Math.random() * 4); // random int [0; 3]\n  while (\n    (direction === 0 && y === 0) ||\n    (direction === 1 && x === 0) ||\n    (direction === 2 && y === 5) ||\n    (direction === 3 && x === 5))\n    direction = Math.floor(Math.random() * 4);\n\n  let offset = 0;\n  switch (direction) {\n    case 0:\n      offset = 1 + Math.floor(Math.random() * y);\n      y -= offset;\n      break;\n    case 1:\n      offset = 1 + Math.floor(Math.random() * x);\n      x -= offset;\n      break;\n    case 2:\n      offset = 1 + Math.floor(Math.random() * (5 - y));\n      y += offset;\n      break;\n    case 3:\n      offset = 1 + Math.floor(Math.random() * (5 - x));\n      x += offset;\n      break;\n  }\n  const newDirection = routes[direction];\n  switch (newDirection) {\n    case 'left':\n      routes = routes.slice(1).concat(routes[0]);\n      break;\n    case 'up':\n      break;\n    case 'right':\n      routes = routes.slice(3).concat(routes.slice(0,3));\n      break;\n    case 'down':\n      routes = routes.slice(2).concat(routes.slice(0,2));\n      break;\n  }\n  return [explainTurn(newDirection, offset), { x, y, routes }];\n}\n\nexport function computeInitTurn(color) {\n  const x = 5, y = (color === 'b') ? 2 : 3;\n  return computeTurn(color, { x, y, routes: ['left', 'up', 'right', 'down'] });\n}\n\nfunction explainTurn(direction, offset) {\n  const textDirection =\n    direction === 'up' ? 'Пройди прямо' :\n    direction === 'down' ? 'Развернись и пройди' :\n    direction === 'left' ? 'Повернись налево, пройди' :\n    direction === 'right' ? 'Повернись направо, пройди' : '';\n  const textOffset =\n    offset === 1 ? 'одну клетку' :\n    offset === 2 ? 'две клетки' :\n    offset === 3 ? 'три клетки' :\n    offset === 4 ? 'четыре клетки' :\n    offset === 5 ? 'пять клеток' : '';\n  return textDirection + ' ' + textOffset + '. На каком цвете ты стоишь?';\n}\n","import React from 'react';\nimport { View, Panel, PanelHeader, FixedLayout } from '@vkontakte/vkui';\nimport ColorRibbon from '../components/ColorRibbon';\nimport ColorTiles from '../components/ColorTiles';\nimport ActionLayout from '../components/ActionLayout';\nimport '../css/ColorTilesGame.css';\nimport { computeTurn, computeInitTurn } from '../lib/ColorTilesGame.js';\n\nconst INIT = 0, INIT_TRANSITION = 1,\n  TURN = 2, TURN_TRANSITION = 3,\n  RETRY_TRANSITION = 4, RETRY = 5, RETRY_INIT_TRANSITION = 6,\n  WIN_TRANSITION = 7, WIN = 8;\n\nconst initialDirections = 'Синяя или красная?';\nconst animationDuration = 800;\n\nexport default class ColorTilesGame extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      directions: initialDirections,\n      turnstate: null,\n      colors: [],\n      view: INIT,\n    };\n  }\n\n  setViewAfterAnimation = (view) =>\n    setTimeout(() => this.setState({ view }), animationDuration);\n\n  tileSelected = (color) => () => {\n    if (this.state.view === INIT) {\n      const [directions, turnstate] = computeInitTurn(color);\n      this.setState({ directions, turnstate, colors: [color], view: INIT_TRANSITION });\n      this.setViewAfterAnimation(TURN);\n      return;\n    }\n    const newTurnstate = computeTurn(color, this.state.turnstate);\n    if (newTurnstate == null) {\n      this.setState({ directions: null, colors: [], view: RETRY_TRANSITION });\n      this.setViewAfterAnimation(RETRY);\n    }\n    else if (this.state.colors.length === 3) {\n      this.setState({ directions: null, colors: this.state.colors.concat(color), view: WIN_TRANSITION });\n      this.setViewAfterAnimation(WIN);\n    }\n    else {\n      const [directions, turnstate] = newTurnstate;\n      this.setState({ directions, turnstate, colors: this.state.colors.concat(color), view: TURN_TRANSITION });\n      this.setViewAfterAnimation(TURN);\n    }\n  }\n\n  render() {\n    const { view } = this.state;\n    const containerClass = view === INIT ? 'tile-container--init'\n      : view === INIT_TRANSITION ? 'tile-container--init-transition'\n        : view === TURN_TRANSITION ? 'tile-container--turn-transition'\n          : (view === RETRY_TRANSITION) ? 'tile-container--fade-out-transition'\n            : (view === RETRY || view === WIN) ? 'tile-container--hidden'\n              : view === RETRY_INIT_TRANSITION ? 'tile-container--retry-init-transition'\n                : view === WIN_TRANSITION ? 'tile-container--win-transition' : '';\n    const tilesOnClick = [\n      this.tileSelected('b'),\n      this.tileSelected('r'),\n      view !== INIT ? this.tileSelected('y') : undefined,\n      view !== INIT ? this.tileSelected('g') : undefined\n    ];\n    return (\n      <View id={this.props.id} activePanel=\"color-tiles-main\">\n        <Panel id=\"color-tiles-main\" theme=\"white\" centered>\n          <PanelHeader noShadow>Какие цвета твои?</PanelHeader>\n          <FixedLayout vertical=\"top\">\n            <ColorRibbon colors={this.state.colors} animated />\n            <div className=\"tile-directions\">{this.state.directions || '\\u00A0'}</div>\n          </FixedLayout>\n          <ColorTiles colors={['b', 'r', 'y', 'g']} containerClass={containerClass} onClick={tilesOnClick}>\n            {(view === RETRY || view === RETRY_INIT_TRANSITION) && this.renderRetryMessage()}\n            {view === WIN && this.renderWinMessage()}\n          </ColorTiles>\n          {view === INIT && <FixedLayout vertical=\"bottom\">\n            <p className=\"tile-init-tip\">\n              Дойди до зала с разноцветными плитками на полу и встань в начало, лицом к каталогу Аббе.\n              Выбери одну из двух плиток посередине.\n            </p>\n          </FixedLayout>}\n        </Panel>\n      </View>\n    );\n  }\n\n  renderRetryMessage() {\n    const animationClass = this.state.view === RETRY_INIT_TRANSITION ? 'message-fade-out' : 'message-fade-in';\n    return (\n      <div className={animationClass}>\n        <ActionLayout primary={['Продолжить', { onClick: this.onClickRetryButton }]}>\n          <p className=\"center\">Упс, ошибочка! Вернись в начало и попробуй еще раз ;)</p>\n        </ActionLayout>\n      </div>\n    );\n  }\n\n  onClickRetryButton = () => {\n    this.setState({ view: RETRY_INIT_TRANSITION });\n    setTimeout(() => this.setState({ view: INIT, directions: initialDirections }), animationDuration);\n  }\n\n  renderWinMessage() {\n    return (\n      <div className=\"message-fade-in\">\n        <ActionLayout primary={['Вперед, к приключениям!', { onClick: this.onClickWinButton }]}>\n          <p className=\"center\">\n            Твои цвета помогут тебе в Оптическом Лесу,\n            но добраться до него ты {this.props.genderify('должен сам', 'должна сама')}.\n          </p>\n          <p className=\"center\">\n            Чтобы не потеряться, следуй по карте.\n          </p>\n        </ActionLayout>\n      </div>\n    );\n  }\n\n  onClickWinButton = () => this.props.onCompletion(this.state.colors);\n}\n","import React, { useEffect, useRef } from 'react';\nimport { View, Panel, PanelHeader, HeaderButton } from '@vkontakte/vkui';\nimport Icon28HelpOutline from '@vkontakte/icons/dist/28/help_outline';\nimport '../css/QuestMap.css';\nimport { nodeLocations, computePaths, isSavestateEmpty, isForestUnlocked } from '../lib/savestate';\n\nexport default function QuestMap({ id, go, savestate, attachOnTransition }) {\n  const mapBottomRef = useRef(null);\n  useEffect(() => {\n    attachOnTransition((from) => {\n      isSavestateEmpty(savestate) && mapBottomRef.current &&\n        requestAnimationFrame(() => mapBottomRef.current.scrollIntoView({ behavior: 'smooth' }));\n    })\n  }, []);\n\n  const helpButton = <HeaderButton onClick={go} data-to=\"quest-map-help\">\n    <Icon28HelpOutline />\n  </HeaderButton>;\n\n  return (\n    <View id={id} activePanel=\"quest-map-main\">\n      <Panel id=\"quest-map-main\" theme=\"white\">\n        <PanelHeader left={helpButton}>Секреты Ордена Оптики</PanelHeader>\n        <div className=\"map-container\">\n          <svg className=\"map\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 68 264\">\n            {nodeLocations.map(renderMapNode(savestate, go))}\n            {renderForest(savestate, go)}\n            {renderPaths(savestate)}\n          </svg>\n          {<div ref={mapBottomRef} />}\n        </div>\n      </Panel>\n    </View>\n  );\n}\n\nconst renderMapNode = (savestate, go) => ({ x, y, id }) => {\n  const state = savestate[id];\n  const props = (state !== 'locked' && id !== 0)\n    ? { onClick: go, 'data-to': 'monster', 'data-monster-id': id }\n    : {};\n  return <circle key={id} cx={x} cy={y} r=\"6\" className={`map-node--${state}`} {...props} />;\n};\n\nconst renderForest = (savestate, go) => {\n  const forestUnlocked = isForestUnlocked(savestate);\n  return (\n    <g className={forestUnlocked ? 'map-node--available' : 'map-node--locked'}\n      onClick={forestUnlocked ? go : undefined} data-to=\"forest\">\n      <circle cx=\"34\" cy=\"10.5\" r=\"10\" />\n      <path strokeLinejoin=\"round\" d=\"M30.5 8.8h2.1l-3.3 3.7H33v3.6h2.2v-3.6h3.5l-3.3-3.8h2.1L34 4.1z\" />\n    </g>\n  );\n};\n\nconst renderPaths = (savestate) =>\n  computePaths(savestate).map(({ state, ...svg }, i) => (\n    <path key={i} className={`map-path map-path--${state}`} {...svg} />\n  ));\n","import React from 'react';\nimport { View, Panel, PanelHeader, HeaderButton } from '@vkontakte/vkui';\nimport Icon28DoneOutline from '@vkontakte/icons/dist/28/done_outline';\n\nexport default function QuestMapHelp({ id, go }) {\n  const backButton = <HeaderButton onClick={go} data-to=\"quest-map\">\n    <Icon28DoneOutline />\n  </HeaderButton>;\n  return (\n    <View id={id} activePanel=\"quest-map-help-main\">\n      <Panel id=\"quest-map-help-main\" theme=\"white\" centered>\n        <PanelHeader left={backButton}>Секреты Ордена Оптики</PanelHeader>\n        <div className=\"map-help-container\">\n          <svg className=\"map\" xmlns=\"http://www.w3.org/2000/svg\" width=\"78\" height=\"78\" viewBox=\"0 0 20.6 20.6\">\n            <g className=\"map-node--locked\">\n              <path strokeLinejoin=\"bevel\" d=\"M19.7 10.5a9.6 9.6 0 0 1-9.6 9.6 9.6 9.6 0 0 1-9.6-9.6A9.6 9.6 0 0 1 10.1 1a9.6 9.6 0 0 1 9.6 9.5z\" />\n              <path strokeLinejoin=\"round\" d=\"M6.6 9.2h2.2L5.4 13H9v3.6h2.2V13h3.5l-3.3-3.8h2.1l-3.4-4.7z\" />\n            </g>\n          </svg>\n          <p>\n            Дорога к Оптическому Лесу — не секрет, но попасть в него может далеко не каждый!\n          </p>\n          <p>\n            Сначала тебе придется победить всех монстров, что охраняют его, используя оптические артефакты.\n          </p>\n          <svg className=\"map\" xmlns=\"http://www.w3.org/2000/svg\" width=\"78\" height=\"78\" viewBox=\"0 0 20.6 20.6\">\n            <circle cx=\"10\" cy=\"10\" r=\"6\" className=\"map-node--available\" />\n          </svg>\n          <p>\n            Нажми на открытую тебе точку на карте, чтобы сразиться с монстром.\n          </p>\n          <svg className=\"map\" xmlns=\"http://www.w3.org/2000/svg\" width=\"78\" height=\"78\" viewBox=\"0 0 20.6 20.6\">\n            <circle cx=\"10\" cy=\"10\" r=\"6\" className=\"map-node--locked\" />\n          </svg>\n          <p>\n            С каждой победой тебе будут открываться новые точки, которые недоступны сейчас.\n          </p>\n        </div>\n      </Panel>\n    </View>\n  );\n}\n","import React from 'react';\nimport HeavyKnight from '../img/monsters/heavy_knight.png';\nimport HeavyKnightDefeated from '../img/monsters/heavy_knight_defeated.png';\nimport ForgottenFortress from '../img/monsters/forgotten_fortress.png';\nimport ForgottenFortressDefeated from '../img/monsters/forgotten_fortress_defeated.png';\nimport Specular from '../img/monsters/specular.png';\nimport Medusa from '../img/monsters/medusa.png';\nimport MedusaDefeated from '../img/monsters/medusa_defeated.png';\nimport Troll3D from '../img/monsters/troll_3d.png';\nimport Troll3Defeated from '../img/monsters/troll_3d_defeated.png';\nimport VioletDemon from '../img/monsters/violet_demon.png';\nimport VioletDemonDefeated from '../img/monsters/violet_demon_defeated.png';\nimport Nightmare from '../img/monsters/nightmare.png';\nimport NightmareDefeated from '../img/monsters/nightmare_defeated.png';\nimport Shadow from '../img/monsters/shadow.png';\nimport ShadowDefeated from '../img/monsters/shadow_defeated.png';\nimport Stereozavr from '../img/monsters/stereozavr.png';\nimport StereozavrDefeated from '../img/monsters/stereozavr_defeated.png';\nimport CylinDemon from '../img/monsters/cylindemon.png';\nimport CylinDemonDefeated from '../img/monsters/cylindemon_defeated.png';\n\nconst monsters = {\n  1: {\n    name: 'Бронированный Рыцарь',\n    sprite: HeavyKnight,\n    spriteDefeated: HeavyKnightDefeated,\n    description: 'На твоём пути встал огромный рыцарь. Он угрожающе поднимает меч. Всё его тело надёжно защищено доспехом. Или нет? Найди способ узнать, где нет брони, чтобы атаковать.',\n    correctQr: 'HeavyKnight18231045ERT2',\n    hint: (\n      <p>\n        Говорят, где-то в закромах Ордена Оптики был могуществнный артефакт, позволяющий измерять температуру на расстоянии... Не знаю, правда это или нет, но сейчас бы он пришелся кстати!\n      </p>\n    ),\n    onVictory: 'Посмотрев на рыцаря через тепловизор, ты замечаешь, что его рука не защищена доспехом. Это твой шанс! Один точный удар и враг повержен!'\n  },\n  2: {\n    name: 'Забытая Цитадель',\n    sprite: ForgottenFortress,\n    spriteDefeated: ForgottenFortressDefeated,\n    description: 'Дорогу перегородила гигантская цитадель. На вид она сделана из слегка прозрачного пластика... Незнакомый путник поведал, что обитатели цитадели покинули её много лет назад. Теперь она только закрывает Солнце близлежащим городам и преграждает дорогу. Один точный выстрел из камнемета мог бы решить проблемы местных и заодно открыть дорогу дальше — найти бы только слабое место этой конструкции.',\n    correctQr: 'ForgottenFortress5631985t2FRG43',\n    hint: (\n      <p>\n        Помимо прочего, путник рассказал много интересных вещей - например, что у местных плотников есть чудо-пластина, стоит взглянуть через неё на конструкцию - сразу видно, как нагрузка в ней распределена. Найти плотников легко - как раз на днях соорудили себе красивую вывеску с драконом!\n      </p>\n    ),\n    onVictory: 'Вот оно! Теперь ясно видно, куда надо метить! Массивный камень взмыл в воздух, и Забытая Цитадель осталась лишь историей.'\n  },\n  3: {\n    name: 'Зеркальный',\n    sprite: Specular,\n    spriteDefeated: Specular,\n    description: 'Что происходит? Лево и право поменялись местами. Похоже, это проделки существа, что стоит пред тобой. Как вернуть всё в норму и победить его?',\n    correctQr: 'Specular2147189357GHE23',\n    fx: ['mirror-text'],\n    hint: <>\n      <p>\n        Магистры Ордена Оптики мастерски владели такой магией. Помогали им в этом небольшие и очень простые артефакты, которые Магистры также использовали, когда облачались в ритуальные костюмы перед важными церемониями.\n      </p>\n      <p>\n        К сожалению, Магистры не любят раскрывать свои секреты, но, уверен, ты найдешь артефакт, который носит с собой любой уважающий себя Магистр.\n      </p>\n    </>,\n    onVictory: 'Теперь, когда все стало на свои места, победить этого монстра стало сущим пустяком!'\n  },\n  4: {\n    name: 'Демон Цилиндра',\n    sprite: CylinDemon,\n    spriteDefeated: CylinDemonDefeated,\n    description: 'Тебе казалось, что ты видел все, но таких странных существ встречать ещё не доводилось! Впрочем, после нескольких безуспешных атак становится ясно - то, что ты видишь всего лишь иллюзия. Осталось лишь найти что-то, что поможет её развеять.',\n    correctQr: 'CylinDemon76453421246FG543',\n    hint: (\n      <p>\n        Этот демон знатно умеет искривлять видимое пространство... К счастью, в Ордене Оптики изучали такую магию и создали артефакт, аннулирующий такие иллюзии. Говорят, что таких демонов стали называть в честь формы этого артефакта, но это не точно...\n      </p>\n    ),\n    onVictory: 'Вот и все, после лишения защитной иллюзии монстру ничего не оставалось кроме как пополнить ряды поверженных. Но нет времени праздновать это событие - твой путь ещё не завершен!'\n  },\n  5: {\n    name: 'Трехмерный Тролль',\n    sprite: Troll3D,\n    spriteDefeated: Troll3Defeated,\n    description: 'Грозный вид существа перед тобой не сулит ничего хорошего. А ещё хуже то, что на нем лежит какая-то магия — облик монстра расплывается, и поразить цель становится практически невозможно! Нужно найти приспособление, способное собрать контуры существа воедино.',\n    correctQr: 'Troll3D2141243252147NGW324',\n    hint: (\n      <p>\n        Такое ощущение, будто контуры монстра разделены на два канала: синий и красный... Кажется, Магитры Ордена Оптики носили специальные приспособления, которые делали их невосприимчивыми к такой магии.\n      </p>\n    ),\n    onVictory: 'Надев очки, ты сразу начинаешь видеть противника ясно — теперь дело за малым! Монстр повержен, но дорога зовет!'\n  },\n  6: {\n    name: 'Фиолетовый Демон',\n    sprite: VioletDemon,\n    spriteDefeated: VioletDemonDefeated,\n    description: 'Злобный рык раздаётся за твоей спиной. Ты оборачиваешься, но не видишь никого. Кажется, твой противник невидим. Быть может, он проявится в другом спектре?..',\n    correctQr: 'VioletDemon324157863289HF245',\n    hint: (\n      <p>\n        Ходят легенды, что в резиденции Ордена Оптики есть особая комната, освещение которой делает невидимое видимым. Возможно, именно в этом месте тебе удастся сразиться со своим противником на равных!\n      </p>\n    ),\n    onVictory: 'В свете ультрафиолетовых ламп вырисовываются очертания монстра — что делать дальше, ты знаешь! Позади ещё один противник, но медлить нельзя.'\n  },\n  7: {\n    name: 'Ночной Кошмар',\n    sprite: Nightmare,\n    spriteDefeated: NightmareDefeated,\n    description: 'Всё вокруг неожиданно накрыла тьма. Ты не видишь ни дороги, ни своих собственных рук. Лишь злобно светящиеся синие глаза виднеются вдали. Что же делать?',\n    correctQr: 'Nightmare74532522345GG532',\n    hint: (\n      <p>\n        Говорят, Орден Оптики хранит артефакт, способный освещать предметы без источников света. Звучит как что-то, что могло бы здорово выручить в твоём положении!\n      </p>\n    ),\n    onVictory: 'Через инфракрасную камеру монстр виден даже в кромешной тьме. А большего и не требуется, ещё одна победа на твоем счету!'\n  },\n  8: {\n    name: 'Тень',\n    sprite: Shadow,\n    spriteDefeated: ShadowDefeated,\n    description: 'За тобой увязалась странная тень. Острая коса в её руках не сулит ничего хорошего. Все попытки ударить тень оборачиваются провалом, ведь только тень может одолеть другую тень...',\n    correctQr: 'Shadow865124634321243JD65',\n    hint: (\n      <p>\n        Магистры Ордена Оптики владеют искусством переходить на сторону теней с помощью магической стены в резиденции. Чтобы сразиться с этим противником, необходимо её отыскать.\n      </p>\n    ),\n    onVictory: 'Теперь ничто не мешает тебе расправиться с противником. Ты на шаг ближе к своей цели — продолжим путь!'\n  },\n  9: {\n    name: 'Стереозавр',\n    sprite: Stereozavr,\n    spriteDefeated: StereozavrDefeated,\n    description: 'Стоило тебе заметить подозрительный силуэт неподалеку, как все пространство вокруг превратилось в неоднородную кашу... Должен быть способ прогнать наваждение и сразиться с его создателем!',\n    correctQr: 'Stereozavr537543216HG641',\n    hint: (\n      <p>\n        Магистры Ордена Оптики способны отражать такие наваждения даже без помощи артефактов! В резиденции висит инструкция, в которой описана методика противодействия такой магии. Если её отыскать, победить монстра станет проще простого!\n      </p>\n    ),\n    onVictory: 'Ты сосредоточенно повторил то, чему тебя научили в резиденции, и наваждение рассеялось! Дальше все просто — монстр теперь беззащитен, а исход боя предрешен.'\n  },\n  10: {\n    name: 'Медуза',\n    sprite: Medusa,\n    spriteDefeated: MedusaDefeated,\n    description: 'Ты слышишь шипение, доносящееся из-за поворота. Инстинкты подсказывают, что лучше не смотреть ей в глаза. Что-то должно помочь обойти её и не превратиться в камень.',\n    correctQr: 'Medusa135281244172398WEF12',\n    hint: (\n      <p>\n        Боюсь, этот монстр тебе не по зубам... Способность обращать взглядом в камень слишком опасна. Был бы способ обратить её силу против неё самой...\n      </p>\n    ),\n    onVictory: 'Ты победно осматриваешь окаменевшую фигуру... Но надо продолжать путь!'\n  },\n};\n\nexport default monsters;\n","import React from 'react';\nimport { View, Panel, PanelHeader } from '@vkontakte/vkui';\nimport PanelHeaderBack from '@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack';\nimport PanelHeaderClose from '@vkontakte/vkui/dist/components/PanelHeaderClose/PanelHeaderClose';\nimport ActionLayout from '../components/ActionLayout';\nimport qrCodeExample from '../img/qr-code-example.svg';\nimport monsters from '../lib/monsters';\nimport { updateSavestateOnCompletion } from '../lib/savestate';\n\nexport default class Monster extends React.Component {\n  constructor(props) {\n    super(props);\n    const completed = props.savestate[props.monsterId] === 'completed';\n    this.state = { view: completed ? 'monster-result' : 'monster-intro', monsterId: props.monsterId, completed }\n  }\n\n  render() {\n    const monster = monsters[this.props.monsterId];\n    return (\n      <View id={this.props.id} activePanel={this.state.view}>\n        {this.renderIntroPanel(monster)}\n        {this.renderHintPanel(monster)}\n        {this.renderActionPanel(monster)}\n        {this.renderResultPanel(monster)}\n      </View>\n    );\n  }\n\n  setView = (view) => () => this.setState({ view });\n\n  renderIntroPanel({ name, sprite, description, fx = [] }) {\n    return (\n      <Panel id=\"monster-intro\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderBack onClick={this.props.go} data-to=\"quest-map\" />}>\n          {name}\n        </PanelHeader>\n        <ActionLayout\n          primary={['В бой', { onClick: this.setView('monster-action') }]}\n          secondary={['Подсказка', { onClick: this.setView('monster-hint') }]}>\n          <img className=\"block-image\" alt={name} src={sprite} />\n          <p className={fx.includes('mirror-text') ? 'fx-mirror-x' : ''}>\n            {description}\n          </p>\n        </ActionLayout>\n      </Panel>\n    );\n  }\n\n  renderHintPanel({ name, hint }) {\n    return (\n      <Panel id=\"monster-hint\" theme=\"white\">\n        <PanelHeader>{name}</PanelHeader>\n        <ActionLayout primary={['Закрыть', { onClick: this.setView('monster-intro') }]}>\n          {hint}\n        </ActionLayout>\n      </Panel>\n    );\n  }\n\n  renderActionPanel({ name, correctQr }) {\n    return (\n      <Panel id=\"monster-action\" theme=\"white\">\n        <PanelHeader left={<PanelHeaderClose children=\"Назад\" onClick={this.setView('monster-intro')} />}>\n          {name}\n        </PanelHeader>\n        <ActionLayout primary={['Применить', { onClick: this.applyQrCode(correctQr) }]}>\n          <div className=\"center\">\n            <p>\n              Найди в музее нужный артефакт, рядом с котором есть код:\n            </p>\n            <img alt=\"Пример QR-кода\" src={qrCodeExample} style={{ maxWidth: '200px' }} />\n            <p>\n              Нажми \"Применить\" и наведи на код камеру своего телефона.\n            </p>\n            <p className=\"secondary-text\">\n              Помни, что один артефакт можно использовать только один раз.\n            </p>\n          </div>\n        </ActionLayout>\n      </Panel>\n    );\n  }\n\n  applyQrCode = (correctQr) => () => {\n    this.props.send('VKWebAppOpenQR', {}, {\n      VKWebAppOpenQRResult: async ({ qr_data }) => {\n        const matchesExpected = qr_data === correctQr;\n        if (matchesExpected) {\n          const savestate = updateSavestateOnCompletion(this.props.savestate, this.props.monsterId);\n          await this.props.updateSavestate(savestate);\n        }\n        this.setState({ view: 'monster-result', completed: matchesExpected });\n      },\n      VKWebAppOpenQRFailed: (_) => {\n        this.setState({ view: 'monster-result', completed: false });\n      }\n    });\n  }\n\n  renderResultPanel({ name, spriteDefeated, onVictory }) {\n    const completed = (\n      <ActionLayout primary={['Продолжить', { onClick: this.props.go, 'data-to': 'quest-map' }]}>\n        <img className=\"block-image\" alt={name} src={spriteDefeated} />\n        <p>{onVictory}</p>\n      </ActionLayout>\n    );\n    const failed = (\n      <ActionLayout primary={['Вернуться', { onClick: this.setView('monster-action') }]}>\n        <p>К сожалению, этот артефакт никак не подействовал на монстра. Подумай еще ;)</p>\n      </ActionLayout>\n    );\n    return (\n      <Panel id=\"monster-result\" theme=\"white\">\n        <PanelHeader>{name}</PanelHeader>\n        {this.state.completed ? completed : failed}\n      </Panel>\n    );\n  }\n}\n","export const forestLetters = ['α', 'β', 'λ', 'η'];\n\nconst rosettaStone = {\n  'r': 'α',\n  'g': 'β',\n  'b': 'λ',\n  'y': 'η'\n};\n\nexport function verifyForestCode(colors, letters) {\n  return colors.length === 4 && colors.every((c, i) => letters[i] === rosettaStone[c]);\n}\n","import React from 'react';\nimport { View, Panel, PanelHeader, ActionSheet, Tappable, FixedLayout } from '@vkontakte/vkui';\nimport ActionLayout from '../components/ActionLayout';\nimport ColorTiles from '../components/ColorTiles';\nimport '../css/Forest.css';\nimport { forestLetters, verifyForestCode } from '../lib/forest';\n\nexport default class Forest extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      view: 'forest-intro',\n      popout: null,\n      letters: ['?', '?', '?', '?'],\n      letterTransition: null // an optional index of the letter that's currently being animated\n    };\n    this.onClickLetterHandlers = [0, 1, 2, 3].map(this.showLetterPopout);\n  }\n\n  render() {\n    const letterLabels =\n      this.state.letters.map((l, i) => {\n        const transitionClass = this.state.letterTransition === i ? 'forest-letter-transition' : undefined;\n        return <span className={transitionClass}>{l}</span>\n      });\n    return (\n      <View id={this.props.id} activePanel={this.state.view} popout={this.state.popout}>\n        <Panel id=\"forest-intro\" theme=\"white\">\n          <PanelHeader>Лес приветствует тебя</PanelHeader>\n          <ActionLayout primary={['Начнем', { onClick: () => this.setState({ view: 'forest-code' }) }]}>\n            <p>\n              Добро пожаловать на финальную часть инициации!\n            </p>\n            <p>\n              Для вступления в Орден Оптики тебе нужен свой, личный ключ, которого нет ни у кого.\n            </p>\n            <p>\n              Найти его ты сможешь в лесу, среди разноцветных деревьев.\n            </p>\n          </ActionLayout>\n        </Panel>\n        <Panel id=\"forest-code\" theme=\"white\" centered>\n          <PanelHeader>Лес</PanelHeader>\n          <FixedLayout className=\"forest-top-message\" vertical=\"top\">\n            <p className=\"forest-top-message__p\">Собери свой ключ с помощью разноцветных деревьев Леса!</p>\n          </FixedLayout>\n          <ColorTiles inline buttonClass=\"forest-button\" colors={this.props.colors} labels={letterLabels}\n            onClick={this.onClickLetterHandlers} />\n          <FixedLayout className=\"forest-top-message\" vertical=\"bottom\">\n            <p className=\"forest-top-message__p\">Внимательно посмотри на деревья... Возможно, они что-то скрывают?</p>\n          </FixedLayout>\n        </Panel>\n      </View>\n    );\n  }\n\n  showLetterPopout = (index) => () => {\n    const letters = forestLetters.map((letter, key) => {\n      const onClick = () => {\n        const letters = this.state.letters.slice();\n        letters[index] = letter;\n        this.setState({ letters, letterTransition: index });\n        setTimeout(() => {\n          if (verifyForestCode(this.props.colors, this.state.letters)) {\n            this.props.onCompletion();\n          }\n          else {\n            /* Remove the transition clas to ensure the animation is correctly replayed\n             * when the popout is requested for the same index */\n            this.setState({ letterTransition: null });\n          }\n        }, /* wait for the letter animation to complete before altering the view */ 300);\n      }\n      return (\n        <Tappable key={key} className=\"forest-popout__letter\" onClick={onClick}>{letter}</Tappable>\n      );\n    });\n\n    this.setState({\n      popout: (\n        <ActionSheet className=\"forest-popout-wrapper\" onClose={() => this.setState({ popout: null })}>\n          <div autoclose className=\"forest-popout\">{letters}</div>\n        </ActionSheet>\n      )\n    });\n  }\n}\n","import React from 'react';\nimport { View, Panel, PanelHeader, Button } from '@vkontakte/vkui';\nimport '../css/CompletedQuest.css';\n\nexport default function CompletedQuest({ id, go, genderify, completionDate, resetGame }) {\n  if (!completionDate) return null;\n\n  return (\n    <View id={id} activePanel=\"completed-quest-main\">\n      <Panel id=\"completed-quest-main\" theme=\"white\" centered>\n        <PanelHeader>Секреты Ордена Оптики</PanelHeader>\n        <div className=\"completed-quest\">\n          <section>\n            <p>Поздравляю!</p>\n            <p>\n              Ты {genderify('нашел', 'нашла')} свой ключ, и теперь ты заслуживаешь звания Магистра Ордена Оптики!\n            </p>\n          </section>\n          <section>\n            <p>\n              Квест пройден {completionDate.toLocaleDateString('ru-RU')}\n            </p>\n            <Button onClick={resetGame}>Начать заново</Button>\n          </section>\n        </div>\n      </Panel>\n    </View >\n  );\n}\n","import React from 'react';\nimport { Root, Div, Spinner } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/global.css';\nimport { setupVkIntegration } from './lib/vk';\nimport { initialSavestate } from './lib/savestate';\n\n// import Home from './views/Home';\nimport Intro from './views/Intro';\nimport ColorTilesGame from './views/ColorTilesGame';\nimport QuestMap from './views/QuestMap';\nimport QuestMapHelp from './views/QuestMapHelp';\nimport Monster from './views/Monster';\nimport Forest from './views/Forest';\nimport CompletedQuest from './views/CompletedQuest';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      view: null, perViewProps: {}, onTransition: {},\n      vk: null, colors: null, savestate: null, completionDate: null\n    };\n  }\n\n  componentDidMount() {\n    setupVkIntegration(async (vk) => {\n      const storedColors = await vk.storage.get('colors');\n      const colors = (storedColors && storedColors !== \"\") ? JSON.parse(storedColors) : null;\n      const storedState = colors && await vk.storage.get('savestate');\n      const savestate = (storedState && storedState !== \"\") ? JSON.parse(storedState) : initialSavestate;\n      const storedCompletion = colors && await vk.storage.get('completion');\n      const completionDate = (storedCompletion && storedCompletion !== \"\") ? new Date(storedCompletion) : null;\n\n      const view = completionDate ? 'completed-quest' : colors ? 'quest-map' : 'intro';\n\n      this.setState({ vk, colors, savestate, view, completionDate });\n    });\n  }\n\n  render() {\n    if (!this.state.vk) {\n      return (\n        <Div style={{ height: '100%' }}>\n          <Spinner size=\"large\" />\n        </Div>\n      );\n    }\n    return (\n      <Root activeView={this.state.view} onTransition={this.onTransition}>\n        {/* Intro & Find Your Colors */}\n        <Intro id=\"intro\" genderify={this.genderify}\n          playerName={this.state.vk && this.state.vk.user.firstName}\n          startQuest={() => this.setState({ view: 'color-tiles-game' })} />\n        <ColorTilesGame id=\"color-tiles-game\" onCompletion={this.saveGameColors}\n          genderify={this.genderify} />\n        {/* Main quest */}\n        <QuestMap id=\"quest-map\" go={this.go} savestate={this.state.savestate}\n          attachOnTransition={this.assignQuestMapOnTransition} />\n        <QuestMapHelp id=\"quest-map-help\" go={this.go} />\n        <Monster id=\"monster\" go={this.go} send={this.state.vk && this.state.vk.send}\n          savestate={this.state.savestate} updateSavestate={this.updateSavestate}\n          {...this.state.perViewProps.monster} />\n        <Forest id=\"forest\" go={this.go} colors={this.state.colors} onCompletion={this.finishQuest} />\n        <CompletedQuest id=\"completed-quest\" go={this.go}\n          completionDate={this.state.completionDate} genderify={this.genderify}\n          resetGame={this.resetSavestate} />\n        {/* Development tools */}\n        {/* <Home id=\"home\" user={this.state.vk && this.state.vk.user} go={this.go}\n          resetSavestate={this.state.vk ? this.resetSavestate : undefined} /> */}\n      </Root>\n    );\n  }\n\n  genderify = (m, f) => this.state.vk && this.state.vk.user.gender === 'female' ? f : m;\n\n  go = (e) => {\n    const { to, ...props } = e.currentTarget.dataset;\n    this.setState({ view: to, perViewProps: { ...this.state.perViewProps, [to]: props } });\n  };\n\n  assignQuestMapOnTransition = (callback) => {\n    this.setState({ onTransition: { ...this.state.onTransition, 'quest-map': callback } });\n  }\n\n  onTransition = ({ from, to }) => {\n    this.state.onTransition[to] && this.state.onTransition[to](from);\n  }\n\n  saveGameColors = async (colors) => {\n    await this.state.vk.storage.set('colors', JSON.stringify(colors));\n    this.setState({ colors, view: 'quest-map' });\n  }\n\n  updateSavestate = async (newSavestate) => {\n    await this.state.vk.storage.set('savestate', JSON.stringify(newSavestate));\n    this.setState({ savestate: newSavestate });\n  }\n\n  finishQuest = async () => {\n    const completionDate = new Date();\n    await this.state.vk.storage.set('completion', completionDate.toJSON());\n    this.setState({ completionDate, view: 'completed-quest' });\n  }\n\n  resetSavestate = async () => {\n    await this.state.vk.storage.set('savestate', '');\n    await this.state.vk.storage.set('colors', '');\n    await this.state.vk.storage.set('completion', '');\n    this.setState({ savestate: initialSavestate, colors: null, view: 'intro' });\n  }\n}\n","import 'core-js/es6';\nimport 'core-js/es7';\nimport * as smoothscroll from 'smoothscroll-polyfill';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n\nsmoothscroll.polyfill();\n\nconnect.send('VKWebAppInit', {});\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}